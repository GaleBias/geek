<audio title="03 _ ä¸šåŠ¡æ°¸ä¸å®•æœºï¼ŒK8så¦‚ä½•å®ç°è‡ªåŠ¨æ‰©å®¹å’Œè‡ªæ„ˆï¼Ÿ" src="https://static001.geekbang.org/resource/audio/3b/15/3b75d5e7287f98f9dd7e526232c00515.mp3" controls="controls"></audio> 
<p>ä½ å¥½ï¼Œæˆ‘æ˜¯ç‹ç‚œã€‚</p><p>ä¸Šä¸€èŠ‚ï¼Œæˆ‘ä»¬ä»‹ç»äº† K8s Pod ä»¥åŠå¦‚ä½•é€šè¿‡ Pod éƒ¨ç½²å®¹å™¨é•œåƒï¼Œå­¦ä¹ äº† K8s äº¤äº’å·¥å…· Kubectl çš„åŸºæœ¬æ“ä½œã€‚</p><p>é‚£ä¹ˆï¼ŒK8s åˆ°åº•æœ‰ä»€ä¹ˆå¼ºå¤§ä¹‹å¤„è®©å¤§å®¶è¶‹ä¹‹è‹¥é¹œå‘¢ï¼Ÿå®ƒåˆèƒ½ç»™æˆ‘ä»¬çš„ä¸šåŠ¡å¸¦æ¥å“ªäº›æ–°çš„å˜åŒ–ï¼Ÿæˆ‘è®¤ä¸ºï¼Œå…¶ä¸­æœ€é‡è¦ä¹Ÿæ˜¯æœ€å¸å¼•äººçš„å°±æ˜¯å®ƒçš„è‡ªåŠ¨æ‰©å®¹å’Œè‡ªæ„ˆæœºåˆ¶ã€‚</p><p>è¿™èŠ‚è¯¾ï¼Œæˆ‘ä¼šç»§ç»­å»¶å±•ä¸ŠèŠ‚è¯¾çš„å†…å®¹ï¼Œä»ä¼ ç»Ÿ VM çš„æ‰©å®¹å’Œè‡ªæ„ˆå‡ºå‘ï¼Œåˆ†æè¿™ç§æ¶æ„çš„ç¼ºç‚¹ã€‚ç„¶åï¼Œæˆ‘ä¼šä»¥æˆ‘ä»¬ä¹‹å‰éƒ¨ç½²çš„ Pod ä¸ºä¾‹ï¼Œå¸¦ä½ ä¸€æ­¥æ­¥åœ¨ K8s ä¸Šé…ç½®æ‰©å®¹å’Œè‡ªæ„ˆï¼Œè®©ä½ ç›´è§‚åœ°æ„Ÿå— K8s çš„å¼ºå¤§ä¼˜åŠ¿ã€‚</p><p>åœ¨å¼€å§‹ä»Šå¤©çš„æ¼”ç»ƒä¹‹å‰ï¼Œä½ éœ€è¦åšå¥½ä»¥ä¸‹å‡†å¤‡ï¼š</p><ul>
<li>å‡†å¤‡ä¸€å°ç”µè„‘ï¼ˆé¦–é€‰ Linux æˆ– macOSï¼ŒWindows ä¹Ÿé€‚ç”¨ï¼Œæ³¨æ„æ“ä½œå·®å¼‚ï¼‰ï¼›</li>
<li><a href="https://docs.docker.com/engine/install/">å®‰è£… Docker</a>ï¼›</li>
<li><a href="https://kubernetes.io/docs/tasks/tools/">å®‰è£… Kubectl</a>ï¼›</li>
<li>æŒ‰ä¸Šä¸€èŠ‚è¯¾çš„å†…å®¹åœ¨æœ¬åœ°åˆ›å»º Kind é›†ç¾¤ã€‚</li>
</ul><h2>ä¼ ç»Ÿçš„æ‰©å®¹å’Œè‡ªæ„ˆ</h2><p>åœ¨ VM æ—¶ä»£ï¼Œæˆ‘ä»¬çš„ä¸šåŠ¡ä»¥è¿›ç¨‹çš„æ–¹å¼è¿è¡Œåœ¨è™šæ‹Ÿæœºä¸Šï¼Œå¹¶ç”±è™šæ‹Ÿæœºå¯¹å¤–æä¾›æœåŠ¡ã€‚éšç€ä¸šåŠ¡è§„æ¨¡çš„æ‰©å¤§ï¼Œæˆ‘ä»¬éœ€è¦æ”¯æ’‘æ›´å¤šçš„è®¿é—®æµé‡ï¼Œè¿™æ—¶ä¸šåŠ¡æ‰©å®¹å°±æˆäº†é¦–å…ˆè¦è€ƒè™‘çš„é—®é¢˜ã€‚</p><p>åœ¨å…¬æœ‰äº‘ç¯å¢ƒä¸‹ï¼ŒVM æ¶æ„æœ€å…¸å‹çš„ä¸€ç§æ‰©å®¹æ–¹å¼æ˜¯<strong>å¼¹æ€§ä¼¸ç¼©ç»„ã€‚</strong>æ„æ€æ˜¯é€šè¿‡å¯¹è™šæ‹Ÿæœºå†…å­˜ã€CPU ç­‰ç›‘æ§æŒ‡æ ‡é…ç½®ä¼¸ç¼©é˜ˆå€¼ï¼Œå®ç°åŠ¨æ€åœ°è‡ªåŠ¨ä¼¸ç¼©ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬ä¸€èˆ¬è¿˜ä¼šç»“åˆè™šæ‹Ÿæœºé•œåƒã€è´Ÿè½½å‡è¡¡å™¨ç­‰äº‘äº§å“ä¸€å¹¶ä½¿ç”¨ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><!-- [[[read_end]]] --><p><img src="https://static001.geekbang.org/resource/image/ab/b1/abe8e1450af02byy53cc3ea8c29617b1.jpg?wh=1920x955" alt="å›¾ç‰‡"></p><p>åœ¨è¿™ä¸ªæ¶æ„ä¸­ï¼Œè´Ÿè½½å‡è¡¡å™¨æ˜¯é›†ç¾¤çš„å”¯ä¸€å…¥å£ï¼Œå®ƒåœ¨æ¥å—è®¿é—®æµé‡åï¼Œä¸€èˆ¬ä¼šå°†æµé‡é€šè¿‡åŠ æƒè½®è®­çš„æ–¹å¼è½¬å‘åˆ°åç«¯é›†ç¾¤ã€‚è´Ÿè½½å‡è¡¡å™¨ä¸€èˆ¬æ˜¯ç›´æ¥ä½¿ç”¨äº‘å‚å•†çš„äº§å“ï¼Œæœ‰ä¸€äº›å›¢é˜Ÿä¹Ÿä¼šè‡ªå»ºé«˜å¯ç”¨çš„  Nginx ä½œä¸ºé›†ç¾¤å…¥å£ã€‚ä¸ºäº†ä¿è¯ä¼¸ç¼©ç»„èŠ‚ç‚¹çš„ä¸šåŠ¡ä¸€è‡´æ€§ï¼Œå¼¹æ€§ä¼¸ç¼©ç»„çš„æ‰€æœ‰ VM éƒ½ä½¿ç”¨åŒä¸€ä¸ªè™šæ‹Ÿæœºé•œåƒã€‚</p><p>å…¶æ¬¡ï¼Œè¦åœ¨ VM ç²’åº¦å®ç°ä¸šåŠ¡è‡ªæ„ˆï¼Œå¸¸è§çš„æ–¹æ¡ˆæ˜¯ä½¿ç”¨ Crontab å®šæ—¶æ£€æŸ¥ä¸šåŠ¡è¿›ç¨‹æˆ–è€…é€šè¿‡å®ˆæŠ¤è¿›ç¨‹çš„æ–¹å¼æ¥è¿è¡Œï¼Œä¾‹å¦‚ Node PM2ã€‚</p><h2>ä¼ ç»Ÿæ‰©å®¹å’Œè‡ªæ„ˆçš„ç¼ºç‚¹</h2><p>ä½†æ˜¯ï¼Œè¿™ç§æ¶æ„æœ‰ä¸€äº›æ˜¾è€Œæ˜“è§çš„ç¼ºé™·ã€‚æœ€å¤§çš„é—®é¢˜æœ‰ä¸¤ä¸ªï¼š</p><ol>
<li>æ‰©å®¹æ…¢ï¼›</li>
<li>è´Ÿè½½å‡è¡¡æ— æ³•æ„ŸçŸ¥ä¸šåŠ¡å¥åº·æƒ…å†µã€‚</li>
</ol><p>æ‰©å®¹æ…¢ä¸»è¦ä½“ç°åœ¨ä¸¤æ–¹é¢ã€‚é¦–å…ˆæ˜¯ VM æŒ‡æ ‡ä¼šæœ‰ä¸€å®šçš„å»¶è¿Ÿï¼›å…¶æ¬¡ï¼Œæ‰©å®¹çš„ VM å†·å¯åŠ¨æ—¶é—´æ¯”è¾ƒæ…¢ï¼Œå¼¹æ€§ä¼¸ç¼©ç»„éœ€è¦æ‰§è¡Œè´­ä¹° VMã€é…ç½®é•œåƒã€åŠ å…¥ä¼¸ç¼©ç»„ã€å¯åŠ¨ VM ç­‰æ“ä½œã€‚è¿™ä¼šè®©æˆ‘ä»¬å¤±å»æ‰©å®¹çš„æœ€ä½³æ—¶æœºï¼Œå¹¶æœ€ç»ˆå½±å“ç”¨æˆ·ä½“éªŒã€‚</p><p>è´Ÿè½½å‡è¡¡æ— æ³•æ„ŸçŸ¥ä¸šåŠ¡å¥åº·æƒ…å†µçš„æ„æ€æ˜¯ï¼ŒVM æ˜¯å¦åŠ å…¥åˆ°å¼¹æ€§ä¼¸ç¼©ç»„æ¥æ”¶å¤–éƒ¨æµé‡ï¼Œä¸€èˆ¬å–å†³äº VM çš„å¥åº·çŠ¶æ€ï¼Œä½† VM å¥åº·å¹¶ä¸ç­‰äºä¸šåŠ¡å¥åº·ï¼Œè¿™å¯¼è‡´åœ¨æ‰©ç¼©å®¹çš„è¿‡ç¨‹ä¸­ï¼Œè¯·æ±‚ä»ç„¶æœ‰å¯èƒ½ä¼šè½¬å‘è‡³ä¸šåŠ¡ä¸å¥åº·çš„èŠ‚ç‚¹ï¼Œé€ æˆä¸šåŠ¡çŸ­æš‚ä¸­æ–­çš„é—®é¢˜ã€‚</p><h2>K8s çš„è‡ªåŠ¨è‡ªæ„ˆ</h2><p><strong>K8sæ˜¯å¦‚ä½•è§£å†³è¿™ä¸¤ä¸ªé—®é¢˜çš„å‘¢ã€‚</strong></p><p>åœ¨è¯¦ç»†ä»‹ç» K8s çš„è‡ªæ„ˆä¹‹å‰ï¼Œæˆ‘æƒ³å…ˆé—®ä½ ä¸€ä¸ªç®€å•çš„é—®é¢˜ï¼Œä½ å¸Œæœ›è‡ªæ„ˆè§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ</p><p>æˆ‘æƒ³ï¼Œä½ å¯èƒ½æœ€å¸Œæœ›è‡ªæ„ˆèƒ½å¤Ÿå¸®æˆ‘ä»¬è§£å†³æœåŠ¡è‡ªåŠ¨é‡å¯çš„é—®é¢˜ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ä¸šåŠ¡è¿›ç¨‹æ„å¤–ä¸­æ–­ï¼Œæˆ–è€…èŠ‚ç‚¹äº§ç”Ÿæ•…éšœæ—¶ï¼Œç³»ç»Ÿå¯ä»¥å¿«é€Ÿè¯†åˆ«ï¼Œè‡ªåŠ¨é‡å¯å¹¶æ¢å¤æœåŠ¡ã€‚å…¶æ¬¡ï¼Œä½ å¯èƒ½è¿˜ä¼šå¸Œæœ›è‡ªæ„ˆèƒ½å¤Ÿè‡ªåŠ¨è½¬ç§»æ•…éšœï¼Œä¹Ÿå°±æ˜¯è®©ä¸šåŠ¡ä¸å¥åº·çš„èŠ‚ç‚¹ä¸æ¥æ”¶æµé‡ï¼Œä¿è¯ç”¨æˆ·ä½“éªŒã€‚</p><p>å¬èµ·æ¥æ˜¯ä¸æ˜¯å¾ˆæ£’ï¼Œè€Œ K8s çš„è‡ªåŠ¨è‡ªæ„ˆåŠŸèƒ½éƒ½å¯ä»¥å¸®ä½ è§£å†³ä¸Šé¢çš„è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬ç»ˆäºèƒ½æ‘†è„± 7*24 å°æ—¶ Oncall äº†ã€‚</p><p><strong>æ¥ä¸‹æ¥æˆ‘ä»¬è¿›å…¥å®æˆ˜ç¯èŠ‚ã€‚</strong></p><p>è¿˜è®°å¾—æˆ‘ä»¬ä¸ŠèŠ‚è¯¾å­¦ä¹ çš„å·¥ä½œè´Ÿè½½å—ï¼Ÿåœ¨å°†é•œåƒéƒ¨ç½²åˆ° K8s é›†ç¾¤æ—¶ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª Pod å·¥ä½œè´Ÿè½½ç±»å‹ã€‚åœ¨è¿™èŠ‚è¯¾çš„å®æˆ˜ç¯èŠ‚é‡Œï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºå¦ä¸€ç§å·¥ä½œè´Ÿè½½ç±»å‹ï¼šDeploymentã€‚</p><p>å¬èµ·æ¥ä¼¼ä¹å¾ˆé™Œç”Ÿï¼Œåˆ«æ‹…å¿ƒï¼Œæˆ‘ä»¬å…ˆä¸è®²æ¦‚å¿µï¼Œè®©æˆ‘ä»¬å…ˆåŠ¨æ‰‹åˆ›å»ºä¸€ä¸ª Deployment å·¥ä½œè´Ÿè½½ã€‚</p><p>é€šå¸¸ï¼Œæˆ‘ä»¬éœ€è¦åƒåˆ›å»º Pod é‚£æ ·å…ˆç¼–å†™ Manifestï¼Œå†é€šè¿‡ kubectl apply å‘½ä»¤æ¥åˆ›å»ºå·¥ä½œè´Ÿè½½ã€‚ä½†æ˜¯ç”±äº Deployment çš„å­—æ®µå®šä¹‰æ¯”è¾ƒå¤šï¼Œç†è§£èµ·æ¥ä¹Ÿç›¸å¯¹å¤æ‚ï¼Œè¿™é‡Œæˆ‘å…ˆæä¾›å¦ä¸€ç§ç›¸å¯¹ç®€å•çš„åŠæ³•ï¼Œé‚£å°±æ˜¯ kubectl create å‘½ä»¤ï¼š</p><pre><code class="language-powershell">$ kubectl create deployment hello-world-flask --image=lyzhang1999/hello-world-flask:latest --replicas=2 
deployment.apps/hello-world-flask created
</code></pre><p>åœ¨è¿™é‡Œï¼Œhello-world-flask ä»£è¡¨å·¥ä½œè´Ÿè½½çš„åç§°ï¼Œâ€“image ä»£è¡¨é•œåƒï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬åœ¨ä¸Šä¸€èŠ‚è¯¾éƒ¨ç½²çš„é•œåƒï¼Œâ€“replicas æŒ‡çš„æ˜¯ Pod å‰¯æœ¬æ•°ï¼Œä½ å¯ä»¥æŠŠå®ƒç±»æ¯”ä¸ºå¼¹æ€§ä¼¸ç¼©ç»„çš„ VM æ•°é‡ã€‚</p><p>æœ¬è´¨ä¸Šï¼Œä½ å¯ä»¥ç†è§£ä¸ºè¿™æ¡å‘½ä»¤ä¼šç”Ÿæˆ Deployment Manifestï¼Œç„¶åè‡ªåŠ¨æ‰§è¡Œ kubectl apply å°† Manifest åº”ç”¨åˆ°é›†ç¾¤å†…ï¼Œçœç•¥äº†æˆ‘ä»¬æ‰‹åŠ¨ç¼–å†™ Manifest çš„è¿‡ç¨‹ã€‚ä½ è¿˜å¯ä»¥ä¸ºä¸Šé¢çš„å‘½ä»¤å¢åŠ  --dry-run å’Œ -o å‚æ•°ï¼Œå•çº¯è¾“å‡º Manifest å†…å®¹ã€‚</p><pre><code class="language-powershell">$ kubectl create deployment hello-world-flask --image lyzhang1999/hello-world-flask:latest --replicas=2 --dry-run=client -o yaml
apiVersion: apps/v1
kind: Deployment
metadata:
&nbsp; creationTimestamp: null
&nbsp; labels:
&nbsp; &nbsp; app: hello-world-flask
&nbsp; name: hello-world-flask
spec:
&nbsp; replicas: 2
&nbsp; selector:
&nbsp; &nbsp; matchLabels:
&nbsp; &nbsp; &nbsp; app: hello-world-flask
&nbsp; strategy: {}
&nbsp; template:
&nbsp; &nbsp; metadata:
&nbsp; &nbsp; &nbsp; creationTimestamp: null
&nbsp; &nbsp; &nbsp; labels:
&nbsp; &nbsp; &nbsp; &nbsp; app: hello-world-flask
&nbsp; &nbsp; spec:
&nbsp; &nbsp; &nbsp; containers:
&nbsp; &nbsp; &nbsp; - image: lyzhang1999/hello-world-flask:latest
&nbsp; &nbsp; &nbsp; &nbsp; name: hello-world-flask
&nbsp; &nbsp; &nbsp; &nbsp; resources: {}
status: {}
</code></pre><p>ä¸Šé¢è¾“å‡ºçš„ Manifest å…¶å®å°±æ˜¯æˆ‘ä»¬åº”ç”¨åˆ°é›†ç¾¤å†…çš„ Manifest å†…å®¹ï¼Œå¯ä»¥çœ‹å‡ºï¼Œå„å‚æ•°éƒ½ç¬¦åˆæˆ‘ä»¬çš„é¢„æœŸã€‚</p><p>ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨ kubectl create service å‘½ä»¤åˆ›å»º Serviceï¼š</p><pre><code class="language-powershell">$ kubectl create service clusterip hello-world-flask&nbsp;--tcp=5000:5000
service/hello-world-flask created
</code></pre><p>æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä½¿ç”¨ kubectl create ingress å‘½ä»¤åˆ›å»º Ingressï¼š</p><pre><code class="language-powershell">$ kubectl create ingress hello-world-flask --rule="/=hello-world-flask:5000"
ingress.networking.k8s.io/hello-world-flask created
</code></pre><p><strong>æœ€åï¼Œåˆ«å¿˜äº†éƒ¨ç½² Ingress-nginxï¼š</strong></p><pre><code class="language-powershell">$ kubectl create -f https://ghproxy.com/https://raw.githubusercontent.com/lyzhang1999/resource/main/ingress-nginx/ingress-nginx.yaml
namespace/ingress-nginx created
serviceaccount/ingress-nginx created
serviceaccount/ingress-nginx-admission created
......
</code></pre><p>è¿™é‡Œå‡ºç°äº†å‡ ä¸ªé™Œç”Ÿçš„æ¦‚å¿µï¼Œä¾‹å¦‚ Deploymentã€Service å’Œ Ingressã€‚åˆ«æ‹…å¿ƒï¼Œç°åœ¨ä½ å¹¶ä¸éœ€è¦ç†è§£ä»–ä»¬ï¼Œè¿™éƒ¨åˆ†å†…å®¹æˆ‘ä¼šåœ¨æ¥ä¸‹æ¥çš„è¯¾ç¨‹ä¸­ä¸ºä½ è¯¦ç»†ä»‹ç»ã€‚</p><p><strong>ç°é˜¶æ®µï¼Œä½ åªéœ€è¦çŸ¥é“ä¸‰ä»¶äº‹ï¼š</strong></p><ol>
<li>Pod ä¼šè¢« Deployment å·¥ä½œè´Ÿè½½ç®¡ç†èµ·æ¥ï¼Œä¾‹å¦‚åˆ›å»ºå’Œé”€æ¯ç­‰ï¼›</li>
<li>Service ç›¸å½“äºå¼¹æ€§ä¼¸ç¼©ç»„çš„è´Ÿè½½å‡è¡¡å™¨ï¼Œå®ƒèƒ½ä»¥åŠ æƒè½®è®­çš„æ–¹å¼å°†æµé‡è½¬å‘åˆ°å¤šä¸ª Pod å‰¯æœ¬ä¸Šï¼›</li>
<li>Ingress ç›¸å½“äºé›†ç¾¤çš„å¤–ç½‘è®¿é—®å…¥å£ã€‚</li>
</ol><p><strong>æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬å¼€å§‹ K8s è‡ªæ„ˆå®éªŒã€‚</strong></p><p>é¦–å…ˆï¼Œæˆ‘ä»¬è¦é€šè¿‡ kubectl get pods åˆ—å‡º Podï¼š</p><pre><code class="language-powershell">$ kubectl get pods
NAME&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;READY&nbsp; &nbsp;STATUS&nbsp; &nbsp; RESTARTS&nbsp; &nbsp;AGE
hello-world-flask-56fbff68c8-2xz7w&nbsp; &nbsp;1/1&nbsp; &nbsp; &nbsp;Running&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3m38s
hello-world-flask-56fbff68c8-4f9qz&nbsp; &nbsp;1/1&nbsp; &nbsp; &nbsp;Running&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3m38s
</code></pre><p>ä»è¿”å›ç»“æœå¯ä»¥çœ‹å‡ºï¼ŒDeployment ä¸ºæˆ‘ä»¬åˆ›å»ºäº†ä¸¤ä¸ª Pod å‰¯æœ¬ï¼Œå®ƒä»¬æ‹¥æœ‰ä¸åŒçš„åå­—ã€‚ï¼ˆä¸ä¸Šä¸€èŠ‚è¯¾æ‰‹åŠ¨éƒ¨ç½²çš„ Pod ä¸åŒï¼Œé€šè¿‡ Deployment åˆ›å»ºçš„ Pod å¸¦æœ‰éšæœºåç¼€ã€‚ï¼‰</p><p>ç”±äºä¹‹å‰æˆ‘ä»¬å·²ç»é€šè¿‡ Kind åœ¨æœ¬åœ°åˆ›å»ºäº†é›†ç¾¤ï¼Œä¹Ÿæš´éœ²ç›‘å¬äº†æœ¬åœ°çš„ 80 ç«¯å£ï¼Œæ‰€ä»¥é›†ç¾¤çš„ Ingress è®¿é—®å…¥å£æ˜¯ <strong>127.0.0.1ã€‚</strong></p><p>æœ‰äº† Ingressï¼Œæˆ‘ä»¬è®¿é—® Pod å°±ä¸å†éœ€è¦è¿›è¡Œç«¯å£è½¬å‘äº†ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è®¿é—® 127.0.0.1ã€‚ä¸‹é¢çš„å‘½ä»¤ä¼šæ¯éš” 1 ç§’é’Ÿå‘é€ä¸€æ¬¡è¯·æ±‚ï¼Œå¹¶æ‰“å°å‡ºæ—¶é—´å’Œè¿”å›å†…å®¹ï¼š</p><pre><code class="language-powershell">$ while true; do sleep 1; curl http://127.0.0.1; echo -e '\n'$(date);done
Hello, my first docker images! hello-world-flask-56fbff68c8-4f9qz
2022å¹´ 9æœˆ 7æ—¥ æ˜ŸæœŸä¸‰ 19æ—¶21åˆ†03ç§’ CST
Hello, my first docker images! hello-world-flask-56fbff68c8-2xz7w
2022å¹´ 9æœˆ 7æ—¥ æ˜ŸæœŸä¸‰ 19æ—¶21åˆ†04ç§’ CST
</code></pre><p>åœ¨è¿™é‡Œï¼Œâ€œHello, my first docker imagesâ€ åé¢ç´§æ¥çš„å†…å®¹æ˜¯ Pod åç§°ã€‚é€šè¿‡è¿”å›å†…å®¹æˆ‘ä»¬ä¼šå‘ç°ï¼Œè¯·æ±‚è¢«å¹³å‡åˆ†é…åˆ°äº†ä¸¤ä¸ª Pod ä¸Šï¼ŒPod åç§°æ˜¯äº¤æ›¿å‡ºç°çš„ã€‚æˆ‘ä»¬è¦ä¿ç•™è¿™ä¸ªå‘½ä»¤è¡Œçª—å£ï¼Œä»¥ä¾¿ç»§ç»­è§‚å¯Ÿã€‚</p><p><strong>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¨¡æ‹Ÿå…¶ä¸­çš„ä¸€ä¸ª Pod å®•æœºï¼Œè§‚å¯Ÿè¿”å›å†…å®¹ã€‚</strong></p><p>æ‰“å¼€ä¸€ä¸ªæ–°çš„å‘½ä»¤è¡Œçª—å£ï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ç»ˆæ­¢å®¹å™¨å†…çš„ Python è¿›ç¨‹ï¼Œè¿™ä¸ªæ“ä½œæ˜¯åœ¨æ¨¡æ‹Ÿè¿›ç¨‹æ„å¤–ä¸­æ­¢å¯¼è‡´å®•æœºçš„æƒ…å†µã€‚</p><pre><code class="language-powershell">$ kubectl exec -it hello-world-flask-56fbff68c8-2xz7w -- bash -c "killall python3"
</code></pre><p>ç„¶åï¼Œæˆ‘ä»¬å›åˆ°åˆšæ‰çš„è¯·æ±‚çª—å£æŸ¥çœ‹è¿”å›å†…å®¹ï¼Œå¯ä»¥çœ‹åˆ°éå¸¸ç¥å¥‡çš„ä¸€å¹•ï¼š</p><pre><code class="language-powershell">Hello, my first docker images! hello-world-flask-56fbff68c8-4f9qz
2022å¹´ 9æœˆ 7æ—¥ æ˜ŸæœŸä¸‰ 19æ—¶27åˆ†44ç§’ CST
Hello, my first docker images! hello-world-flask-56fbff68c8-4f9qz
2022å¹´ 9æœˆ 7æ—¥ æ˜ŸæœŸä¸‰ 19æ—¶27åˆ†45ç§’ CST
Hello, my first docker images! hello-world-flask-56fbff68c8-4f9qz
</code></pre><p>æ‰€æœ‰çš„è¯·æ±‚æµé‡éƒ½è¢«è½¬å‘åˆ°äº†æ²¡æœ‰æ•…éšœçš„ Podï¼Œ<strong>ä¹Ÿå°±æ˜¯è¯´ï¼Œæ•…éšœæˆåŠŸåœ°è¢«è½¬ç§»äº†ï¼</strong></p><p>ç­‰å¾…å‡ ç§’é’Ÿï¼Œç»§ç»­è§‚å¯Ÿï¼Œæˆ‘ä»¬ä¼šé‡æ–°å‘ç° hello-world-flask-56fbff68c8-2xz7w Pod çš„è¿”å›å†…å®¹ï¼Œè¿™è¯´æ˜ Pod è¢«é‡å¯æ¢å¤åï¼Œé‡æ–°åŠ å…¥åˆ°äº†è´Ÿè½½å‡è¡¡æ¥æ”¶å¤–éƒ¨æµé‡ï¼š</p><pre><code class="language-powershell">Hello, my first docker images! hello-world-flask-56fbff68c8-2xz7w
2022å¹´ 9æœˆ 7æ—¥ æ˜ŸæœŸä¸‰ 19æ—¶27åˆ†52ç§’ CST
Hello, my first docker images! hello-world-flask-56fbff68c8-4f9qz
2022å¹´ 9æœˆ 7æ—¥ æ˜ŸæœŸä¸‰ 19æ—¶27åˆ†53ç§’ CST
Hello, my first docker images! hello-world-flask-56fbff68c8-2xz7w
</code></pre><p>ç„¶åï¼Œæˆ‘ä»¬å†æ¬¡ä½¿ç”¨ kubectl get pods æŸ¥çœ‹ Podï¼š</p><pre><code class="language-powershell">$ kubectl get pods
NAME                                 READY   STATUS    RESTARTS   AGE
hello-world-flask-56fbff68c8-2xz7w   1/1     Running   1(1m ago)  3m38s
hello-world-flask-56fbff68c8-4f9qz   1/1     Running   0          3m38s
</code></pre><p>è¿™é‡Œè¦æ³¨æ„çœ‹ï¼Œ hello-world-flask-56fbff68c8-2xz7w Pod çš„ RESTARTS å€¼ä¸º 1 ï¼Œä¹Ÿå°±æ˜¯è¯´ K8s è‡ªåŠ¨å¸®æˆ‘ä»¬é‡å¯äº†è¿™ä¸ª Podã€‚</p><p>å¥½äº†ï¼Œè®©æˆ‘ä»¬é‡æ–°æ¥æ¢³ç†ä¸€ä¸‹å…¨è¿‡ç¨‹ã€‚é¦–å…ˆï¼Œ K8s æ„ŸçŸ¥åˆ°äº†ä¸šåŠ¡ Pod æ•…éšœï¼Œç«‹åˆ»è¿›è¡Œäº†æ•…éšœè½¬ç§»å¹¶éš”ç¦»äº†æœ‰æ•…éšœçš„ Podï¼Œå¹¶å°†è¯·æ±‚è½¬å‘åˆ°äº†å…¶ä»–å¥åº·çš„ Pod ä¸­ã€‚éšåé‡å¯äº†æœ‰æ•…éšœçš„ Podï¼Œæœ€åå°†é‡å¯åçš„ Pod åŠ å…¥åˆ°äº†è´Ÿè½½å‡è¡¡å¹¶å¼€å§‹æ¥æ”¶å¤–éƒ¨è¯·æ±‚ã€‚è¿™äº›è¿‡ç¨‹éƒ½æ˜¯è‡ªåŠ¨åŒ–å®Œæˆçš„ã€‚</p><p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å®Œæˆäº† K8s è‡ªæ„ˆçš„å®éªŒã€‚æœ‰äº† K8s çš„è‡ªæ„ˆåŠŸèƒ½ï¼Œæˆ‘ä»¬å°±ä¸å†éœ€è¦ä¸ºæ½œåœ¨çš„ä¸šåŠ¡ä¸­æ–­é—®é¢˜è€Œçƒ¦æ¼äº†ã€‚</p><h2>K8s çš„è‡ªåŠ¨æ‰©å®¹</h2><p>é™¤äº†è‡ªæ„ˆåŠŸèƒ½ä»¥å¤–ï¼ŒK8s è¿˜ä¸ºæˆ‘ä»¬æä¾›äº†è‡ªåŠ¨æ‰©å®¹çš„èƒ½åŠ›ã€‚</p><p>è‡ªåŠ¨æ‰©å®¹ä¾èµ–äº K8s Metric Server æä¾›çš„ç›‘æ§æŒ‡æ ‡ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦å®‰è£…å®ƒï¼š</p><pre><code class="language-powershell">$ kubectl apply -f https://ghproxy.com/https://raw.githubusercontent.com/lyzhang1999/resource/main/metrics/metrics.yaml
serviceaccount/metrics-server created
clusterrole.rbac.authorization.k8s.io/system:aggregated-metrics-reader created
clusterrole.rbac.authorization.k8s.io/system:metrics-server created
......
</code></pre><p>å®‰è£…å®Œæˆåï¼Œç­‰å¾… Metric å·¥ä½œè´Ÿè½½å°±ç»ªï¼š</p><pre><code class="language-powershell">$ kubectl wait deployment -n kube-system metrics-server --for condition=Available=True --timeout=90s
deployment.apps/metrics-server condition met
</code></pre><p>Metric Server å°±ç»ªåï¼Œé€šè¿‡ kubectl autoscale å‘½ä»¤æ¥ä¸º Deployment åˆ›å»ºè‡ªåŠ¨æ‰©å®¹ç­–ç•¥ï¼š</p><pre><code class="language-powershell">$ kubectl autoscale deployment hello-world-flask --cpu-percent=50 --min=2 --max=10
</code></pre><p>è¿™å…¶ä¸­ï¼Œâ€“cpu-percent è¡¨ç¤º CPU ä½¿ç”¨ç‡é˜ˆå€¼ï¼Œå½“ CPU è¶…è¿‡ 50% æ—¶å°†è¿›è¡Œè‡ªåŠ¨æ‰©å®¹ï¼Œâ€“min ä»£è¡¨æœ€å°çš„ Pod å‰¯æœ¬æ•°ï¼Œâ€“max ä»£è¡¨æœ€å¤§æ‰©å®¹çš„å‰¯æœ¬æ•°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè‡ªåŠ¨æ‰©å®¹ä¼šæ ¹æ® CPU çš„ä½¿ç”¨ç‡åœ¨ 2 ä¸ªå‰¯æœ¬å’Œ 10 ä¸ªå‰¯æœ¬ä¹‹é—´è¿›è¡Œæ‰©ç¼©å®¹ã€‚</p><p>æœ€åï¼Œè¦ä½¿è‡ªåŠ¨æ‰©å®¹ç”Ÿæ•ˆï¼Œè¿˜éœ€è¦ä¸ºæˆ‘ä»¬åˆšæ‰éƒ¨ç½²çš„ hello-world-flask Deployment è®¾ç½®èµ„æºé…é¢ã€‚ä½ å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤æ¥é…ç½®ï¼š</p><pre><code class="language-powershell">$ kubectl patch deployment hello-world-flask --type='json' -p='[{"op": "add", "path": "/spec/template/spec/containers/0/resources", "value": {"requests": {"memory": "100Mi", "cpu": "100m"}}}]'
deployment.apps/hello-world-flask patched
</code></pre><p>ç°åœ¨ï¼ŒDeployment å°†ä¼š<strong>é‡æ–°åˆ›å»º</strong>ä¸¤ä¸ªæ–°çš„ Podï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ç­›é€‰å‡ºæ–°çš„ Podï¼š</p><pre><code class="language-powershell">$ kubectl get pod --field-selector=status.phase==Running
NAME&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;READY&nbsp; &nbsp;STATUS&nbsp; &nbsp; RESTARTS&nbsp; &nbsp;AGE
hello-world-flask-64dd645c57-4clbp&nbsp; &nbsp;1/1&nbsp; &nbsp; &nbsp;Running&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 117s
hello-world-flask-64dd645c57-cc6g6&nbsp; &nbsp;1/1&nbsp; &nbsp; &nbsp;Running&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 117s
</code></pre><p>é€‰æ‹©ä¸€ä¸ª Pod å¹¶ä½¿ç”¨ kubectl exec è¿›å…¥åˆ°å®¹å™¨å†…ï¼š</p><pre><code class="language-powershell">$ kubectl exec -it hello-world-flask-64dd645c57-4clbp -- bash
root@hello-world-flask-64dd645c57-4clbp:/app#
</code></pre><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¨¡æ‹Ÿä¸šåŠ¡é«˜å³°æœŸåœºæ™¯ï¼Œä½¿ç”¨ ab å‘½ä»¤æ¥åˆ›å»ºå¹¶å‘è¯·æ±‚ï¼š</p><pre><code class="language-powershell">root@hello-world-flask-64dd645c57-4clbp:/app# ab -c 50 -n 10000 http://127.0.0.1:5000/
</code></pre><p>åœ¨è¿™æ¡å‹åŠ›æµ‹è¯•çš„å‘½ä»¤ä¸­ï¼Œ-c ä»£è¡¨ 50 ä¸ªå¹¶å‘æ•°ï¼Œ-n ä»£è¡¨ä¸€å…±è¯·æ±‚ 10000 æ¬¡ï¼Œæ•´ä¸ªè¿‡ç¨‹å¤§æ¦‚ä¼šæŒç»­åå‡ ç§’ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ‰“å¼€ä¸€ä¸ªæ–°çš„å‘½ä»¤è¡Œçª—å£ï¼Œä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥æŒç»­ç›‘æ§ Pod çš„çŠ¶æ€ï¼š</p><pre><code class="language-powershell">$ kubectl get pods --watch
NAME&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;READY&nbsp; &nbsp;STATUS&nbsp; &nbsp; RESTARTS&nbsp; &nbsp;AGE
hello-world-flask-64dd645c57-9x869&nbsp; &nbsp;1/1&nbsp; &nbsp; &nbsp;Running&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 4m6s
hello-world-flask-64dd645c57-vw8nc&nbsp; &nbsp;0/1&nbsp; &nbsp; &nbsp;Pending&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0s
hello-world-flask-64dd645c57-46b6s&nbsp; &nbsp;0/1&nbsp; &nbsp; &nbsp;ContainerCreating&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0s
hello-world-flask-64dd645c57-vw8nc&nbsp; &nbsp;1/1&nbsp; &nbsp; &nbsp;Running&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 18s
</code></pre><p>â€“watch å‚æ•°ä¼šä¸€ç›´ç­‰å¾…ï¼Œä½ å¯ä»¥ä½¿ç”¨ ctrl+c æˆ–å…³é—­çª—å£æ¥ç»ˆæ­¢ã€‚</p><p>è¿™é‡Œå‚æ•° --watch è¡¨ç¤ºæŒç»­ç›‘å¬ Pod çŠ¶æ€å˜åŒ–ã€‚åœ¨ ab å‹åŠ›æµ‹è¯•çš„è¿‡ç¨‹ä¸­ï¼Œä¼šä¸æ–­åˆ›å»ºæ–°çš„ Pod å‰¯æœ¬ï¼Œ<strong>è¿™è¯´æ˜ K8s å·²ç»æ„ŸçŸ¥åˆ°äº† Pod çš„ä¸šåŠ¡å‹åŠ›ï¼Œå¹¶ä¸”æ­£åœ¨è‡ªåŠ¨è¿›è¡Œæ¨ªå‘æ‰©å®¹</strong>ã€‚</p><h2>æ€»ç»“</h2><p>è¿™èŠ‚è¯¾ï¼Œæˆ‘å…ˆä»‹ç»äº†åŸºäº VM çš„æ‰©å®¹å’Œè‡ªæ„ˆæ–¹æ¡ˆï¼Œå¯ä»¥çœ‹åˆ°ï¼Œå®ƒä»¬åœ¨æ‰©å®¹é€Ÿåº¦å’Œæµé‡ç®¡ç†ä¸Šå­˜åœ¨è¾ƒå¤§çš„ä¸è¶³ä¹‹å¤„ã€‚ç„¶åï¼Œæˆ‘é€šè¿‡ä¸¤ä¸ªå®é™…çš„ä¾‹å­å‘ä½ ç›´è§‚åœ°å±•ç¤ºäº† K8s è‡ªæ„ˆå’Œè‡ªåŠ¨æ‰©å®¹çš„å¼ºå¤§ä¹‹å¤„ã€‚</p><p>K8s çš„è‡ªæ„ˆå’Œæ‰©å®¹çš„å¯¹è±¡éƒ½æ˜¯ Podï¼Œå®ƒæ˜¯ K8s çš„æœ€å°è°ƒåº¦å•ä½ã€‚åœ¨åˆ›å»º Pod çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¹¶ä¸æ˜¯åƒä¸Šä¸€èŠ‚è¯¾é‚£æ ·ç›´æ¥åˆ›å»º Pod å·¥ä½œè´Ÿè½½ï¼Œè€Œæ˜¯é€šè¿‡åˆ›å»º Deployment å·¥ä½œè´Ÿè½½æ¥é—´æ¥åˆ›å»º Podã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿åœ°åˆ›å»ºå¤šä¸ª Pod å‰¯æœ¬ï¼Œå¹¶ä¸”åªéœ€è¦å…³æ³¨ Deployment çš„çŠ¶æ€å°±å¯ä»¥é—´æ¥åœ°æ§åˆ¶ Pod çš„çŠ¶æ€ã€‚</p><p>æ­¤å¤–ï¼Œæˆ‘è¿˜ä¸ºä½ ä»‹ç»äº†ä¸€ç§ç¼–å†™ Manifest çš„æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨ kubectl create deployment --dry-run=client -o yaml å‘½ä»¤ï¼Œå®ƒä¼šä¸ºæˆ‘ä»¬è¾“å‡ºè¯¦ç»†çš„ Manifest ä¿¡æ¯ã€‚è¿™æ¡å‘½ä»¤é€‚ç”¨äºéå¸¸å¤šçš„ K8s å¯¹è±¡ï¼Œå…·ä½“æœ‰å“ªäº›å¯¹è±¡ä½ å¯ä»¥ä½¿ç”¨ kubectl create --help æŸ¥çœ‹ã€‚åœ¨æœªæ¥çš„å·¥ä½œä¸­ï¼Œå½“ä½ éœ€è¦ç¼–å†™ Manifest åˆä¸è®°å¾—è¯­æ³•æ—¶ï¼Œå®ƒä¼šå¯¹ä½ éå¸¸æœ‰å¸®åŠ©ã€‚</p><p>é™¤äº† Deployment å·¥ä½œè´Ÿè½½ï¼Œåœ¨è‡ªåŠ¨æ‰©å®¹çš„å®éªŒè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬è¿˜å¼•å‡ºäº†å¥½å‡ ä¸ªæ–°æ¦‚å¿µï¼Œæˆ‘ä»¬ç°é˜¶æ®µåªéœ€è¦çŸ¥é“å®ƒä»¬çš„åŠŸèƒ½å³å¯ï¼Œåœ¨æ¥ä¸‹æ¥çš„è¯¾ç¨‹ä¸­æˆ‘è¿˜ä¼šä¸ºä½ è¯¦ç»†ä»‹ç»ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>æœ€åï¼Œç»™ä½ ç•™ä¸€é“æ€è€ƒé¢˜å§ã€‚</p><p>èƒ½ä¸èƒ½åˆ†äº«ä¸€ä¸‹ä½ ç°åœ¨ä½¿ç”¨çš„è‡ªæ„ˆå’Œæ‰©å®¹æ–¹æ¡ˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿç›¸æ¯”è¾ƒ K8s ï¼Œå®ƒæœ‰ä»€ä¹ˆä¼˜åŠ¿å’Œç¼ºç‚¹ï¼Ÿ</p><p>æ¬¢è¿ä½ ç»™æˆ‘ç•™è¨€äº¤æµè®¨è®ºï¼Œä½ ä¹Ÿå¯ä»¥æŠŠè¿™èŠ‚è¯¾åˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ä¸€èµ·é˜…è¯»ã€‚æˆ‘ä»¬ä¸‹èŠ‚è¯¾è§ã€‚</p>
<style>
    ul {
      list-style: none;
      display: block;
      list-style-type: disc;
      margin-block-start: 1em;
      margin-block-end: 1em;
      margin-inline-start: 0px;
      margin-inline-end: 0px;
      padding-inline-start: 40px;
    }
    li {
      display: list-item;
      text-align: -webkit-match-parent;
    }
    ._2sjJGcOH_0 {
      list-style-position: inside;
      width: 100%;
      display: -webkit-box;
      display: -ms-flexbox;
      display: flex;
      -webkit-box-orient: horizontal;
      -webkit-box-direction: normal;
      -ms-flex-direction: row;
      flex-direction: row;
      margin-top: 26px;
      border-bottom: 1px solid rgba(233,233,233,0.6);
    }
    ._2sjJGcOH_0 ._3FLYR4bF_0 {
      width: 34px;
      height: 34px;
      -ms-flex-negative: 0;
      flex-shrink: 0;
      border-radius: 50%;
    }
    ._2sjJGcOH_0 ._36ChpWj4_0 {
      margin-left: 0.5rem;
      -webkit-box-flex: 1;
      -ms-flex-positive: 1;
      flex-grow: 1;
      padding-bottom: 20px;
    }
    ._2sjJGcOH_0 ._36ChpWj4_0 ._2zFoi7sd_0 {
      font-size: 16px;
      color: #3d464d;
      font-weight: 500;
      -webkit-font-smoothing: antialiased;
      line-height: 34px;
    }
    ._2sjJGcOH_0 ._36ChpWj4_0 ._2_QraFYR_0 {
      margin-top: 12px;
      color: #505050;
      -webkit-font-smoothing: antialiased;
      font-size: 14px;
      font-weight: 400;
      white-space: normal;
      word-break: break-all;
      line-height: 24px;
    }
    ._2sjJGcOH_0 ._10o3OAxT_0 {
      margin-top: 18px;
      border-radius: 4px;
      background-color: #f6f7fb;
    }
    ._2sjJGcOH_0 ._3klNVc4Z_0 {
      display: -webkit-box;
      display: -ms-flexbox;
      display: flex;
      -webkit-box-orient: horizontal;
      -webkit-box-direction: normal;
      -ms-flex-direction: row;
      flex-direction: row;
      -webkit-box-pack: justify;
      -ms-flex-pack: justify;
      justify-content: space-between;
      -webkit-box-align: center;
      -ms-flex-align: center;
      align-items: center;
      margin-top: 15px;
    }
    ._2sjJGcOH_0 ._10o3OAxT_0 ._3KxQPN3V_0 {
      color: #505050;
      -webkit-font-smoothing: antialiased;
      font-size: 14px;
      font-weight: 400;
      white-space: normal;
      word-break: break-word;
      padding: 20px 20px 20px 24px;
    }
    ._2sjJGcOH_0 ._3klNVc4Z_0 {
      display: -webkit-box;
      display: -ms-flexbox;
      display: flex;
      -webkit-box-orient: horizontal;
      -webkit-box-direction: normal;
      -ms-flex-direction: row;
      flex-direction: row;
      -webkit-box-pack: justify;
      -ms-flex-pack: justify;
      justify-content: space-between;
      -webkit-box-align: center;
      -ms-flex-align: center;
      align-items: center;
      margin-top: 15px;
    }
    ._2sjJGcOH_0 ._3Hkula0k_0 {
      color: #b2b2b2;
      font-size: 14px;
    }
</style><ul><li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/13/f6/24/547439f1.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>ghostwritten</span>
  </div>
  <div class="_2_QraFYR_0">1. å®‰è£… podmanã€kubectlã€kind<br>2. åˆ›å»º kind ï¼škind create cluster --config config.yaml<br>3. åˆ›å»º deploymentï¼škubectl create deployment hello-world-flask --image=lyzhang1999&#47;hello-world-flask:latest --replicas=2<br>4. ç”Ÿæˆ yamlæ–‡ä»¶ï¼škubectl create deployment hello-world-flask --image lyzhang1999&#47;hello-world-flask:latest --replicas=2 --dry-run=client -o yaml<br>5. åˆ›å»º serviceï¼škubectl create service clusterip hello-world-flask --tcp=5000:5000<br>6. åˆ›å»º ingressï¼škubectl create ingress hello-world-flask --rule=&quot;&#47;=hello-world-flask:5000&quot;<br>7. åˆ›å»º ingress-nginxï¼škubectl create -f https:&#47;&#47;ghproxy.com&#47;https:&#47;&#47;raw.githubusercontent.com&#47;lyzhang1999&#47;resource&#47;main&#47;ingress-nginx&#47;ingress-nginx.yaml<br>8. è®¿é—®æµ‹è¯•ï¼šwhile true; do sleep 1; curl http:&#47;&#47;127.0.0.1; echo -e &#39;\n&#39;$(date);done<br>9. æ¨¡æ‹Ÿå®•æœºï¼škubectl exec -it hello-world-flask-56fbff68c8-2xz7w -- bash -c &quot;killall python3&quot;<br>10. åˆ›å»º metric serverï¼škubectl apply -f https:&#47;&#47;ghproxy.com&#47;https:&#47;&#47;raw.githubusercontent.com&#47;lyzhang1999&#47;resource&#47;main&#47;metrics&#47;metrics.yaml<br>11. ç­‰å¾…deploymentåˆ›å»ºæˆåŠŸï¼škubectl wait deployment -n kube-system metrics-server --for condition=Available=True --timeout=90s<br>12. åˆ›å»ºè‡ªåŠ¨æ‰©å®¹ç­–ç•¥ï¼š kubectl autoscale deployment hello-world-flask --cpu-percent=50 --min=2 --max=10<br>13. deployment è®¾ç½®èµ„æºé…é¢ï¼škubectl patch deployment hello-world-flask --type=&#39;json&#39; -p=&#39;[{&quot;op&quot;: &quot;add&quot;, &quot;path&quot;: &quot;&#47;spec&#47;template&#47;spec&#47;containers&#47;0&#47;resources&quot;, &quot;value&quot;: {&quot;requests&quot;: {&quot;memory&quot;: &quot;100Mi&quot;, &quot;cpu&quot;: &quot;100m&quot;}}}]&#39;<br>14. æŸ¥çœ‹æœ€æ–°åˆ›å»ºçš„podï¼škubectl get pod --field-selector=status.phase==Running<br>15. åˆ›å»ºå¹¶å‘è¯·æ±‚ï¼škubectl exec -it hello-world-flask-64dd645c57-4clbp -- ab -c 50 -n 10000 http:&#47;&#47;127.0.0.1:5000&#47;<br>16. æŸ¥çœ‹ pod æ•°é‡ï¼šk get pods -w<br></div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: éå¸¸æ£’çš„å‘½ä»¤å¤‡å¿˜å½•ï¼</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2022-12-22 23:26:35</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/0f/d9/36/92d8eb91.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>Promise</span>
  </div>
  <div class="_2_QraFYR_0">æˆ‘ä»¬å…¬å¸ä¹‹å‰ä½¿ç”¨pm2å¼€è¿›è¡ŒæœåŠ¡è‡ªæ„ˆï¼Œæ‰‹åŠ¨æ‰©ç¼©å®¹ã€‚åé¢æ­å»ºäº†k8sç¯å¢ƒä½¿ç”¨k8så¼€è¿›è¡ŒæœåŠ¡çš„éƒ¨ç½²å’Œä¸Šçº¿å¾ˆæ–¹ä¾¿ã€‚ä½†æ˜¯k8sè¿™ä¸ªä¸œè¥¿è¦å­¦çš„æ˜¯åœ¨å¤ªå¤šäº†ã€‚ã€‚ã€‚ã€‚</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: æ˜¯çš„ï¼ŒK8s çš„å†…å®¹æ·±ä¸è§åº•ï¼Œå­¦ä¹ ä¸€ä¸¤é¡¹æŠ€æœ¯æ˜¯è¿œè¿œä¸å¤Ÿçš„ã€‚è¿™ä¹Ÿæ˜¯è¿™é—¨è¯¾ç¨‹å¼€è¯¾çš„åˆè¡·ã€‚</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2022-12-14 15:55:34</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/13/f6/24/547439f1.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>ghostwritten</span>
  </div>
  <div class="_2_QraFYR_0">å®ç° K8s autoscalers è‡ªåŠ¨æ‰©å®¹ ä¸‰ç±»ç»„ä»¶ï¼š<br>Horizoâ€‹â€‹ntal Pod Autoscaler (HPA)ï¼šæ ¹æ® CPU åˆ©ç”¨ç‡å¢åŠ æˆ–å‡å°‘å¤åˆ¶æ§åˆ¶å™¨ã€éƒ¨ç½²ã€å‰¯æœ¬é›†æˆ–æœ‰çŠ¶æ€é›†ä¸­çš„ pod æ•°é‡â€”â€”ç¼©æ”¾æ˜¯æ°´å¹³çš„ï¼›<br>Cluster Autoscalerï¼š æ ¹æ® pod çš„èµ„æºè¯·æ±‚è‡ªåŠ¨æ·»åŠ æˆ–åˆ é™¤é›†ç¾¤ä¸­çš„èŠ‚ç‚¹ï¼›<br>Vertical Pod Autoscaler (VPA)ï¼šå®ƒå¢åŠ å’Œå‡å°‘å®¹å™¨ CPU å’Œå†…å­˜èµ„æºé…ç½®ï¼Œä»¥ä½¿é›†ç¾¤èµ„æºåˆ†é…ä¸å®é™…ä½¿ç”¨æƒ…å†µä¿æŒä¸€è‡´ã€‚</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: æ˜¯çš„ï¼Œæœ€ç»å¸¸ä½¿ç”¨çš„æ˜¯ HPAã€‚<br><br>CA ç›®å‰ä¸»æµçš„äº‘å‚å•†éƒ½æ”¯æŒï¼ŒåŒ…æ‹¬å›½å†…ä¸‰å¤§äº‘å‚å•†ã€‚<br><br>VPA çš„ç‰¹æ€§å¯¹ç”Ÿäº§å¸®åŠ©å¾ˆå¤§ï¼Œä¸è¿‡ç›®å‰è¿˜æ²¡æœ‰ GAï¼Œå¯ä»¥è¿›ä¸€æ­¥ç•™æ„ã€‚</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2022-12-22 23:49:02</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/13/73/a3/2b077607.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>Michael</span>
  </div>
  <div class="_2_QraFYR_0">è¿™ä¸ªsvcé»˜è®¤çš„è½¬å‘ç­–ç•¥æ˜¯ä»€ä¹ˆï¼Ÿè½®è¯¢å˜›ï¼Ÿæˆ‘éªŒè¯ä¸æ˜¯è½®è¯¢çš„<br>[root@iZwz90sfnybprmnd5ojhr9Z data]# while true; do sleep 1; curl http:&#47;&#47;127.0.0.1; echo -e &#39;\n&#39;$(date);done<br>Hello, my first docker images! hello-world-flask-c68dc87d7-tfvcs<br>Tue Dec 13 12:58:02 CST 2022<br>Hello, my first docker images! hello-world-flask-c68dc87d7-kbv4j<br>Tue Dec 13 12:58:03 CST 2022<br>Hello, my first docker images! hello-world-flask-c68dc87d7-tfvcs<br>Tue Dec 13 12:58:04 CST 2022<br>Hello, my first docker images! hello-world-flask-c68dc87d7-tfvcs<br>Tue Dec 13 12:58:05 CST 2022<br>Hello, my first docker images! hello-world-flask-c68dc87d7-kbv4j<br>Tue Dec 13 12:58:06 CST 2022<br>Hello, my first docker images! hello-world-flask-c68dc87d7-kbv4j<br>Tue Dec 13 12:58:07 CST 2022<br>Hello, my first docker images! hello-world-flask-c68dc87d7-tfvcs<br>Tue Dec 13 12:58:08 CST 2022<br>Hello, my first docker images! hello-world-flask-c68dc87d7-kbv4j<br>Tue Dec 13 12:58:09 CST 2022</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: å–å†³äº K8s é›†ç¾¤çš„ kube-proxy çš„å®ç°æ–¹å¼ï¼ŒIptables é»˜è®¤æ˜¯éšæœºï¼ŒIPVS æ¨¡å¼é»˜è®¤æ˜¯åŠ æƒè½®è®­çš„ç®—æ³•ã€‚</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2022-12-13 13:05:20</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/11/ff/28/040f6f01.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>Y</span>
  </div>
  <div class="_2_QraFYR_0">å‰é¢éƒ½æˆåŠŸäº†ã€‚è‡ªåŠ¨æ‰©å®¹æ²¡æœ‰å®éªŒæˆåŠŸã€‚</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: æ£€æŸ¥ä¸€ä¸‹ Metric-Server æ˜¯å¦å¯åŠ¨æˆåŠŸï¼Œéœ€è¦å®ƒæä¾› CPU å’Œå†…å­˜æŒ‡æ ‡ã€‚</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2022-12-15 01:02:08</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src=""
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>Geek_df0d4d</span>
  </div>
  <div class="_2_QraFYR_0">è¯·æ•™ä¸€ä¸‹ï¼Œhpaçš„é»˜è®¤ç¼©å®¹ç­–ç•¥æ˜¯ä»€ä¹ˆï¼Ÿ--cpu-percent=50ï¼Œå½“ CPU è¶…è¿‡ 50% æ—¶å°†è¿›è¡Œè‡ªåŠ¨æ‰©å®¹ï¼Œé‚£æ˜¯å¦é™åˆ°50ä»¥ä¸‹å°±ç¼©å®¹ï¼Ÿæ˜¯å•ä¸ªpodé™åˆ°50ä»¥ä¸‹ç¼©å®¹ï¼Œè¿˜æ˜¯deployæ•´ä½“é™åˆ°50ï¼Ÿ</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: Pod çš„å¹³å‡èµ„æºåˆ©ç”¨ç‡</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2023-04-08 00:27:35</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/10/e6/54/86056001.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>å°é©¬ğŸ</span>
  </div>
  <div class="_2_QraFYR_0">å•¥æ—¶å€™ç›‘å¬äº†80ç«¯å£äº† æˆ‘è¯·æ•™ä¸‹</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: åœ¨ç¬¬äºŒå°èŠ‚åˆ›å»º KIND é›†ç¾¤çš„æ—¶å€™æŒ‡å®šäº† PortMappingï¼Œæš´éœ²äº†80ç«¯å£ï¼š<br><br><br>kind: Cluster<br>apiVersion: kind.x-k8s.io&#47;v1alpha4<br>nodes:<br>- role: control-plane<br>  kubeadmConfigPatches:<br>  - |<br>    kind: InitConfiguration<br>    nodeRegistration:<br>      kubeletExtraArgs:<br>        node-labels: &quot;ingress-ready=true&quot;<br>  extraPortMappings:<br>  - containerPort: 80<br>    hostPort: 80<br>    protocol: TCP<br>  - containerPort: 443<br>    hostPort: 443<br>    protocol: TCP</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2023-03-22 11:04:43</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/24/e9/1c/81dc0585.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>å…»å…»</span>
  </div>
  <div class="_2_QraFYR_0">æ€ä¹ˆåˆ¤æ–­podæ•…éšœçš„ï¼Ÿæ–‡ç« ä¸­æ²¡çœ‹åˆ°è®¾ç½®çš„åœ°æ–¹ï¼Œæ˜¯é€šè¿‡å¯¹åº”podçš„ç«¯å£å—ï¼Ÿ</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: ä½¿ç”¨ K8s æ¢é’ˆï¼Œåœ¨ 12 è®²ä¸­æœ‰è¯¦ç»†ä»‹ç»ã€‚</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2023-03-14 13:44:00</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/14/10/3d/b3991de7.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>dulp</span>
  </div>
  <div class="_2_QraFYR_0">ç°åœ¨ä½¿ç”¨çš„å°±æ˜¯k8sï¼Œè‡ªåŠ¨æ‰©å®¹ä½¿ç”¨autoscaleå®ç°ã€‚</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2023-03-10 19:46:20</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/14/91/5f/88d36112.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>ä¸æ±‚</span>
  </div>
  <div class="_2_QraFYR_0">ä½ å¥½ è€å¸ˆ ä½¿ç”¨ kubectl create ingress å‘½ä»¤åˆ›å»º Ingressæ—¶ error: unknown flag: --rule æ˜¯ä¸æ˜¯æ²¡æœ‰è¿™ä¸ªå‚æ•°ï¼Ÿï¼Ÿ</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: ä½ å¯èƒ½éœ€è¦æ£€æŸ¥ä¸€ä¸‹ K8s ç‰ˆæœ¬å’Œ Kubectl çš„ç‰ˆæœ¬ï¼Œå¯ä»¥å…ˆå°è¯•æŠŠ kubectl å‡çº§åˆ°æœ€æ–°ç‰ˆã€‚<br>æˆ‘æœ¬åœ°çš„ Kubectl ç‰ˆæœ¬æ˜¯ v1.24.3ï¼Œåˆ›å»ºæ­£å¸¸ã€‚</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2023-02-28 13:01:32</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/24/5f/f1/c66c8c51.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>åƒä¸¤å—äº‘</span>
  </div>
  <div class="_2_QraFYR_0">éƒ¨ç½²ingress-nginxçš„æ—¶å€™ pod èµ·ä¸æ¥ï¼ŒæŠ¥é”™ï¼š<br>0&#47;1 nodes are available: 1 Insufficient cpu. preemption: 0&#47;1 nodes are available: 1 No preemption victims found for incoming pod.<br>çœ‹ç€å‰é¢åƒæ˜¯cpuä¸å¤Ÿï¼Œæœ‰å…¶ä»–äººä¹Ÿé‡åˆ°è¿™ä¸ªé—®é¢˜çš„ä¹ˆï¼Ÿ</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: é›†ç¾¤èµ„æºä¸å¤Ÿï¼Œå¦‚æœä½ ç”¨çš„æ˜¯ Docker Desktop å¯ä»¥è°ƒæ•´ä¸€ä¸‹èµ„æºè®¾ç½®ï¼Œå®åœ¨è§£å†³ä¸äº†å¯ä»¥è€ƒè™‘å¼€é€šä¸€ä¸ªäº‘å‚å•†é›†ç¾¤æ¥æµ‹è¯•ã€‚</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2023-02-01 00:17:10</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/29/87/e1/b85dce85.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>æ— å°½è”šè“</span>
  </div>
  <div class="_2_QraFYR_0">è€å¸ˆå®éªŒå®Œæ€ä¹ˆæ”¶å°¾å‘€ï¼Œæˆ‘å‘ç°ç”¨kubectl delete pod --all ä¹‹åï¼Œk8sè¿˜æ˜¯ä¼šé‡æ–°æ‹‰ä¸¤ä¸ªpodsèµ·æ¥</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: åˆ é™¤æ‰€æœ‰çš„ deployment å·¥ä½œè´Ÿè½½å°±å¯ä»¥äº†ï¼Œåˆ é™¤ Pod çš„è¯å·¥ä½œè´Ÿè½½ä¼šæŠŠ Pod é‡æ–°æ‹‰èµ·æ¥ã€‚</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2023-01-14 04:54:25</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/LvrILicoibOUNTcVQFHSHtia0D8LZ8iaWMibtGYTZiaI9Xr8Oqsl2YfGmjKzKqOXy3Yb1fbkEFNe4g7CoPxvc7mZxjyw/132"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>LouisYuan</span>
  </div>
  <div class="_2_QraFYR_0">è¿™æ‰©å®¹å®Œäº†ä¹‹åå’‹è‡ªåŠ¨ç¼©å®¹</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: CPU å’Œå†…å­˜ä½¿ç”¨ç‡é™ä¸‹æ¥ä¹‹åä¼šè‡ªåŠ¨ç¼©å®¹ã€‚</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2023-01-11 10:10:59</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src=""
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>Geek_7c4279</span>
  </div>
  <div class="_2_QraFYR_0">ç§’</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2022-12-18 19:29:01</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/0f/62/b8/0e1b655e.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>fireshort</span>
  </div>
  <div class="_2_QraFYR_0">kubectl describe ingress hello-world-flask<br>Name:             hello-world-flask<br>Labels:           &lt;none&gt;<br>Namespace:        default<br>Address:<br>Default backend:  default-http-backend:80 (&lt;error: endpoints &quot;default-http-backend&quot; not found&gt;)<br>Rules:<br>  Host        Path  Backends<br>  ----        ----  --------<br>  *<br>              &#47;   hello-world-flask:5000 (10.10.2.209:5000,10.10.2.210:5000)<br>Annotations:  &lt;none&gt;<br>Events:       &lt;none&gt;<br><br>è¿™ä¸ªçœ‹èµ·æ¥æ˜¯æ­£å¸¸çš„ï¼Œä½†æ˜¯æ‰§è¡Œ<br> curl http:&#47;&#47;127.0.0.1<br>å¾—åˆ°ï¼š<br>curl: (7) Failed to connect to 127.0.0.1 port 80 after 0 ms: Connection refused<br><br>è¿™æ˜¯ä»€ä¹ˆåŸå› å‘¢ï¼Ÿ</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: kubectl get service æ£€æŸ¥ä¸€ä¸‹ service æ˜¯å¦éƒ¨ç½²äº†ã€‚</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2022-12-15 16:08:10</div>
  </div>
</div>
</div>
</li>
</ul>