<audio title="直播加餐02｜阿里速卖通是如何在竞争变化中做技术战略的？" src="https://static001.geekbang.org/resource/audio/3e/6b/3e49c2a12db4029b792e5062641e4e6b.mp3" controls="controls"></audio> 
<p>你好，我是郭东白。上节课我们讲解了从技术战略到架构选型的相关知识点，这节课，我就来分享一个来自阿里速卖通的跨境电商的真实案例。</p><p>这个案例的跨度非常长，有五到六年的时间。顺便说一下我当时为什么加入到速卖通。我当时的老板非常有情怀。他认为做速卖通，也就是中国品牌的跨境出海，不仅能为中国企业带来价值，更能为华人带来荣耀。我被他的一番话感动，所以就决定加入速卖通。</p><p>跨境，指的就是中国商家（也有少部分海外商家）通过全球性的交易平台，把商品快递给海外卖家。2018年的速卖通平台，已经可以支持20多种语言，商品交易涉及200多个国家。从这里我们可以看出跨境有三个显而易见的特性：<strong>物流慢、需求长尾和全球业务复杂度高</strong>。这也是它区别于本地电商的特性。如下图所示：</p><p><img src="https://static001.geekbang.org/resource/image/7c/15/7c563d8d5d54fecc0dc2133e2decef15.png?wh=4000x2250" alt=""></p><p>物流慢，能慢到什么程度呢？慢到从商家发货到买家收到商品，需要足足30天。想想看，如果你买一件商品需要等30天，那肯定不会买食物，也不能买药，而只能买一些非生活必需品。这就是所谓的需求长尾。</p><p>全球业务的复杂度很高，这就更好理解了。既然平台是面向全球的，那肯定会出现各种各样的问题，比如全球几乎每天都会发生各种罢工事件，过各种节日。而最典型的就是运送包裹的飞机失事了。</p><!-- [[[read_end]]] --><p>我在速卖通做了四年多的架构师和CTO，就碰到了两起飞机失事。一般一架飞机上会运载几千甚至几万个包裹。假设是5000个包裹，如果手动处理这些包裹的退货，肯定是来不及的。所以这个业务“复杂”，不仅表现在日常业务中，还表现在各种意想不到的业务场景，就像发生飞机失事后，我们需要为全球几万个买家办理退款、重新发货等等。</p><p>那么针对跨境电商这三个特性，我们所作出的技术战略是什么呢？在思考这个问题之前，我们还需要了解速卖通当时的业务状态。</p><h2>2014年底的业务状态与技术挑战</h2><p>速卖通在2014年的业务状态，其实有着非常好的<strong>野蛮增长</strong>，年同比在100%。而且联盟和Web的<strong>流量红利</strong>还在。这意味着速卖通几乎是全球唯一一个跨境大站。</p><p>这是一个很有意思的地方。如果你要找那种很偏、很邪门的商品，那只有速卖通平台有。为了撸这些红利，除了主站的语言是英文外，我们还会设置很多种语言。当用户使用不同的语言搜索商品时，比如中国的紫砂壶，就会显示只有速卖通平台在售卖。这不就是白来的流量嘛！</p><p>除了流量红利外，我们还发现了<strong>精细化流量运营的红利</strong>。在一个国家，我们可以根据用户的喜好和网站流量特点，专门为这个国家做站点，让站点的落地更精准。此外，我们还可以针对某个国家做多语言国家战略。比如美国，我们可能会同时做美国的西班牙语言站和美国的英语语言站。</p><p>不过这么做也让速卖通面临着一些业务上的问题，一个很明显的劣势就是商品和商家质量都不能得到很好的保障。除此之外，在2014年底我们还面临一些技术上的挑战。</p><p>首先是<strong>服务稳定性很差</strong>，以巨石服务为主。搜索和流量业务几乎是停滞的。而导致停滞的原因在于我们有14个站点，并且各自做了代码拷贝，共享页面的底层逻辑。相当于我们有14套代码在共享一个底层。当我们修改共享底层的代码时，这14个站点，只要有一个出错，那么连代码都提交不了。</p><p>另一个导致的问题是召回优化特别难。我们经常会遇到优化仅对部分国家站正向。如果只做针对单个国家的排序优化就还好，但做整体召回策略的优化则可能起到负向的效果。比如美国的主站是正向的，而到了墨西哥的西班牙站效果就变负向了。因为我们的召回策略可能召回了更适合美国买家的商品，但对于西班牙人来说，他们并不喜欢。</p><p>一般来讲，一旦分出来14个站点，就会有14个代码分支，那么最后的代码不仅臃肿，迭代起来也非常慢。另外，既然有14个站点，必然会建14个烟囱，意味着我们的数据被完全分散了，用户的行为数据和模型数据不能在跨国家间做分享了。这就是个极大的痛苦。</p><p>面对业务和技术上的挑战，该怎么办呢？我当时从业务出发，有了一个技术洞察，那就是<strong>靠数据驱动增长</strong>。如下图所示：</p><p><img src="https://static001.geekbang.org/resource/image/f5/7d/f572127d07fd40c62b3bd8b166ce3b7d.png?wh=4000x2250" alt=""></p><p>横轴是选择（Selection），意思是平台上有多少个商品。纵轴是质量（Quality），代表商品的质量。</p><p>当平台效率维持在一定的情况下，两者的关系是一条等成本的曲线，商品和质量选择是可以互换的。假设一个平台在图中等高线上来回移动，说明平台效率是一样的。如果沿着这条等高线向右移动，说明商家的招商条件变宽了，质量变低了。如果移动到了很低的点，那么就像是拼多多。而到了左边的高点，就可能与京东很相似。这两者的差异就是，前者的商品量很多，但质量并不能保障。后者是商品量很少，但质量可以得到保障。</p><p>那么我们真正要做的，并不是在等高线上移动，而是在垂直线上移动，从而获取更多更优质的商品。从技术视角看，这就需要做到三个统一：统一的平台、统一的模型和统一的微服务。有了这三个统一，就可以带来统一的数据。紧接着，我们就可以做这么几件事。</p><p>第一，可以看向上的箭头部分。通过数据对商品质量进行优化，让商家做分层服务，并对物流做优化。这样一来，商品质量就会提高。注意，这里的关键在于质量的提高完全是通过数据得来的，而不是用更多的钱来补贴用户以拿到更好的商品。</p><p>再看箭头向右的部分，我们怎么通过数据和算法来获取更多的选择呢？首先要做到个性化。个性化的好处就是针对不同用户展示不同的商品组合，提升用户的发现效率。这样一来，在同样的浏览时长内，用户看到的对于他个人有价值的商品就更多了。从单个商品的视角来看，商品的价值也会被更多用户看到。</p><p>其次是地区化定价。速卖通当时是为全球200多个国家服务的，每个国家的定价可能都不相同。举例来说，如果将一个商品从中国运到越南，由于距离近，加上越南本来就有很多中国商品。在这种情况下，假设商品卖得很贵，那肯定不会有多少人买。但如果把这个中国商品运到非洲国家，定价与在越南时一样，那么商家肯定就不愿意卖了，因为物流费太高。</p><p>所以针对不同国家就要设置阶梯定价，让商家在不同国家有钱赚。如果有钱赚，当地的需求还不少，证明这个商品对于当地用户的价值很高，平台就可以把更多的选择提供给当地用户。对于商家来说，商品触达到了更多的用户，相应地，也就有更多商家有意愿拿出更多商品放置到平台上。</p><p>最后是履约方式定制。跨境物流有很多限制条件，比如带电商品是不可以上飞机的。那么如果有了针对个别带电商品的物流方式的选择能力，而不是一刀切，那么这些带电商品就可以触达目的地的人群。比如中国和欧洲是通火车的，我们就可以通过陆地交通的方式来承运这些带电商品。</p><p>经由这些分析，我们制定了2015年的三个技术战略。</p><h2>2015年的技术战略</h2><p><strong>一是全球化。</strong>我们用一整套系统来服务全球，这样的话，刚才讲的14个站点和14套代码分支的问题就不存在了。而且数据和算法还可以集中在一起做沉淀。</p><p><strong>二是微服务化</strong>。微服务化现在已经是稀松平常了，不过当年我们技术服务的更新缓慢，所以微服务化就会让更新变得更快。我在法则二里专门讲到过这个话题。从实际情况来看，微服务化的确提高了产出，同时也提升了团队成员的成就感。</p><p><strong>三是数据化。</strong>有了统一的数据，我们就可以做很多架构上的取舍了。“取”，就是通过数据和算法的优化路径。主要从三方面入手：</p><ol>
<li>做微服务化，提升研发速度和稳定性。</li>
<li>统一数据层，让整个部门的数据得到共享。</li>
<li>统一算法优化路径，也就是统一平台，统一召回和粗排、精排，尽快做定制，然后再自顶向下全场景覆盖。</li>
</ol><p>“舍”什么呢？主要是放弃工程化的优化路径，也就是舍掉代码分支。而且在舍掉的过程中，我还做了两个非常极端的事情。一方面，我要求业务暂停发布一个半月。同时，我们还与业务方反复协商，最后允许上线转化率的绝对值可以下降0.5%（真实情况是下降了0.3%左右）。</p><p>经过后来的事实验证，这是一个非常明智的决定。因为暂停发布后，我们不仅将国家站和多语言站的代码分支全部合并。虽然短期内下降了0.３%，但从长期来看，让我们拿到了一些很好的结果。</p><p>第一，我们做出了架构分层。如下图所示：</p><p><img src="https://static001.geekbang.org/resource/image/c8/9f/c87c216967f7b7051066b301717db89f.png?wh=4000x2250" alt=""></p><p>架构分层变成统一的层之后，整个公司的大技术栈，像统一网络层、统一基础设施层、统一数据层、运维服务应用是分开的状态，最终会形成一个全球化开放数据生态和算法竞技场。那么我们可以把所有的算法分成很多算子。这样的话，如果在一个国家试跑成功，我们就可以把它复制到另一个国家，也就是另一个场景中。如下图所示：</p><p><img src="https://static001.geekbang.org/resource/image/dd/9e/dd2ac78a23238160d578557156643f9e.png?wh=4000x2250" alt=""></p><p>这些小算子，有些是做推荐的，有些是做画像的。把这些算子进行组合，就能组合成更多种多样的算法场景。包括个性化推荐、评价优化、用户退货、个性化落地等等。在大规模推动的过程中，我们的业务结果是，运算稳定性大幅度提升，到了四个九；统一数据层加速了数据沉淀；数据和算法优化路径出现，得到了连续五年的红利。</p><p>优化路径这里可以详细再说一下。全面个性化，每年大约能带来15%的转化优化。算法团队的人数，由最初的四个人变成一百多个人。可以看到，这些数字，在当年是一个非常辉煌的结果。百分之十几的转换优化，一下子把一个团队从工程驱动型，变成由数据和算法驱动了。这个时候，技术人员的发言权就完全不一样了。而我作为CTO，对团队的信心也会非常大。</p><h2>2017年的战略转型</h2><p>分享完了架构，我再来分享一下速卖通这个跨度接近六年的战略转型。</p><p>在2017年底时，速卖通的业务形态发生了很大的变化。一是在全球出现了很多竞争对手，所以业务增长也就放慢了，导致速卖通的体验劣势就越发显现出来了，价格红利也逐渐消失。很简单的例子，一个包裹我们需要30天才能送到，而在本地电商，一个包裹五六天就送到了。</p><p>除此之外，速卖通由于上市之后合规压力大幅增加，业务决策进行了调整，开始转向本地化拓展。</p><p>这个时候，我们整合了平台数据，获得了两个非常重要的商业洞察。一个是全球用户的行为开始有明显差异，如下图所示：</p><p><img src="https://static001.geekbang.org/resource/image/d8/89/d8a25a07137d8a021185445yy0d58f89.png?wh=4000x2250" alt=""></p><p>比如主站是美国站，美国站的转化率远远高于法国站，而客单价却低于法国站。具体到用户行为上，说明美国人很容易引起消费冲动，但是买的东西一般很便宜。而法国人呢，虽然买的东西少，但是单价高。这是第一个洞察。</p><p>另一个是关于用户行为的深度洞察，如下图所示：</p><p><img src="https://static001.geekbang.org/resource/image/5a/07/5ae024476b3b2545cb86b3c40c7a6407.png?wh=4000x2250" alt=""></p><p>如上图所示，你可以比较俄罗斯、西班牙、美国和巴西的前一千个商品的重叠度。前一千个商品的重叠度，指的就是前一千个曝光的商品、前一千个被点击的商品和前一千个完成支付的商品，这三者之间的重叠度差异。前一千个曝光是非常重叠的，全球有31.8%的重叠度。但是到了前一千个点击就只有1/6了。到了支付，就只剩下1/20了。</p><p>也就说，在曝光时，大家似乎是一样的。但是到了真正花钱购买的时候，差异就显现出来了。而每个国家独有的商品，曝光度虽然不高，不过点击量却很高，支付率相应也就高了。这是一个非常深的洞察。而之所以能有这个洞察，跟我们把数据放在一个整体平台上来看有关，而不是放在十几个烟囱中。</p><p>通过这两张图的比较，我们认知到世界各国的用户，从本质上看，的确有着非常明显且具体的差异。有差异怎么办呢？<strong>我们决定不仅要做国家差异化，还要做本地化</strong>。</p><p>如下图所示，我们已经完成了一个全球化的平台搭建，现在要开始做本地化了：</p><p><img src="https://static001.geekbang.org/resource/image/80/92/80208867b145e8b7793a51152bcf5892.png?wh=4000x2250" alt=""></p><p>所谓本地化，就是在原有耦合的全球平台的基础上，为每个国家配置不同的规则。</p><p>我们首先针对每个国家开放了数字化运营的能力，专门为每个国家做定制化的运营策略，搭建专门的本地运营团队。刚开始时，在俄罗斯、西班牙和法国，每个国家都有不同的商品和用户体验，也有各自的商家和供应商。但是通过一套发布系统，这些节点流转到我们的全球搜索平台上，那么这些商品就可以被全球用户购买了。</p><p>当然，搜索也可以分国家、分语言去做搜索算法定制。从流量开始，每个国家的流量都落地在相应国家的定制详情页上，然后再进一步流转到自己的定单、履约和售后流程中。所有这些流程节点都可以被定制。一旦可以被全面定制，最终就可以达到国家差异化的目的。</p><p>如上图所示，可以看到节点流转部分已经被完全本地化了。中间的数据化运营部分，也具有了一定的本地化运营能力。再往下一层是原子服务层，是全球统一的。而最下面的中间件和基础设施层，也是全球统一的。</p><h2>2018年的技术战略</h2><p>在2018年的技术战略中，我们还做了一个事情，叫<strong>国家差异化</strong>，这个非常有意思，是一个由算法驱动的国家差异化理念。如下图所示：</p><p><img src="https://static001.geekbang.org/resource/image/f8/83/f8c3717efe28fe1a9c48670f5b309a83.png?wh=4000x2250" alt=""></p><p>每个国家的规则约束不同，比如欧洲注重个人隐私。那么针对个人隐私，欧洲各国会有本地的运营和本地的控制面板。控制面板能够控制我们输入到全球的算法平台。而算法平台，你会有当地的数据，当地的算法模型和当地的运营知识，这些都要灌到一个算法平台里的。这个平台有在线学习的能力。有了这个能力，我们就可以根据不同的用户分级，进行不同的体验设计，包括落地页、交互、渠道落地。有了分类的能力和定制的能力，你从曝光到点击，到召回，到排序，最后每个国家都有属于自己的UI、个性化算法和体验。比如图中的列表页、详情页、评价页，都是定制的。</p><p>最终的结果也很喜人。本地国家站建好了，西班牙也建了研发中心，而且通过迁移学习还为我们带来了15%的业绩增长。不过不幸的是这个项目后来停掉了，做了国际化中台转型。</p><h2>案例总结</h2><p>总结来看，速卖通整个战略的变化，从14年底15年初时的全球化，再到18年的国家差异化，都是根据竞争环境的变化而变化的。</p><p>技术战略的变化，意味着团队也要发生变化。2015年时团队里只有4名算法和150名工程。而到了2018年，就有100多位算法人员和200多位工程师。竞争环境也完全变了，竞争环境到了18年变成了全球+本地。取舍、机会也完全变了。2015年的机会主要是数据和算法的机会，而到了2018年，就变成了国家差异化和迁移学习的机会。攻防也变了。最开始时，根本没有强劲的竞争对手。但四五年后，竞争对手也如春笋般涌出。</p><p>在这个过程中，一方面，我们只能想方设法利用自身的数据能力。比如俄罗斯的数据，我们会发现对波兰的推荐也有帮助。他们都是斯坦维亚人，人种同源；都属于寒带气候，温度类似；收入结构也类似，于是我们就推测审美是不是也可能比较接近。这些都是可利用的数据。</p><p>此外，还要利用好工具和架构优势。每个技术战略制定时，由于背景、维度等不同，最后形成的战略也是不一样的。2014年是做开放的数据进战场，也就是全球化。到了2018年，就是做国家差异化。</p><p>从全球化到了国家差异化的转变，这个技术洞察的关键就在于战略终局发生了变化。就像2014年我们一直认为就是要做跨境，就是要做全球化。但后来发现并不是这样。跨境不是战略终局，本地化才是。</p><p>很遗憾的是，我们花了很长时间才意识到这一点。而现在中国有很多人在做跨境，可能大家做到后面会面临同样的问题。你会发现，我们当年踩过坑，都很可能再次出现。</p><p>最后，我简单总结下今天的内容。我们首先讲了技术战略，它是针对企业愿景、团队特性和竞争环境所定制的长期技术计划。并且战略是取舍，是攻防，更是终局。</p><p>而架构师的主要任务，就是通过架构活动帮助企业实现战略意图。这个过程要靠深度的业务理解，然后利用技术手段为企业注入外部适应性。而我想特别强调的是，好的技术战略，就像我们刚才展示的，来自于深度的商业洞察，而这也需要不断打磨、不断创新。</p><p>如果今天这节课对你有帮助，欢迎你点击课程右上角的分享按钮，把课程转发给你的同事或朋友，大家一起交流、进步。我们下节课再见！</p>
<style>
    ul {
      list-style: none;
      display: block;
      list-style-type: disc;
      margin-block-start: 1em;
      margin-block-end: 1em;
      margin-inline-start: 0px;
      margin-inline-end: 0px;
      padding-inline-start: 40px;
    }
    li {
      display: list-item;
      text-align: -webkit-match-parent;
    }
    ._2sjJGcOH_0 {
      list-style-position: inside;
      width: 100%;
      display: -webkit-box;
      display: -ms-flexbox;
      display: flex;
      -webkit-box-orient: horizontal;
      -webkit-box-direction: normal;
      -ms-flex-direction: row;
      flex-direction: row;
      margin-top: 26px;
      border-bottom: 1px solid rgba(233,233,233,0.6);
    }
    ._2sjJGcOH_0 ._3FLYR4bF_0 {
      width: 34px;
      height: 34px;
      -ms-flex-negative: 0;
      flex-shrink: 0;
      border-radius: 50%;
    }
    ._2sjJGcOH_0 ._36ChpWj4_0 {
      margin-left: 0.5rem;
      -webkit-box-flex: 1;
      -ms-flex-positive: 1;
      flex-grow: 1;
      padding-bottom: 20px;
    }
    ._2sjJGcOH_0 ._36ChpWj4_0 ._2zFoi7sd_0 {
      font-size: 16px;
      color: #3d464d;
      font-weight: 500;
      -webkit-font-smoothing: antialiased;
      line-height: 34px;
    }
    ._2sjJGcOH_0 ._36ChpWj4_0 ._2_QraFYR_0 {
      margin-top: 12px;
      color: #505050;
      -webkit-font-smoothing: antialiased;
      font-size: 14px;
      font-weight: 400;
      white-space: normal;
      word-break: break-all;
      line-height: 24px;
    }
    ._2sjJGcOH_0 ._10o3OAxT_0 {
      margin-top: 18px;
      border-radius: 4px;
      background-color: #f6f7fb;
    }
    ._2sjJGcOH_0 ._3klNVc4Z_0 {
      display: -webkit-box;
      display: -ms-flexbox;
      display: flex;
      -webkit-box-orient: horizontal;
      -webkit-box-direction: normal;
      -ms-flex-direction: row;
      flex-direction: row;
      -webkit-box-pack: justify;
      -ms-flex-pack: justify;
      justify-content: space-between;
      -webkit-box-align: center;
      -ms-flex-align: center;
      align-items: center;
      margin-top: 15px;
    }
    ._2sjJGcOH_0 ._10o3OAxT_0 ._3KxQPN3V_0 {
      color: #505050;
      -webkit-font-smoothing: antialiased;
      font-size: 14px;
      font-weight: 400;
      white-space: normal;
      word-break: break-word;
      padding: 20px 20px 20px 24px;
    }
    ._2sjJGcOH_0 ._3klNVc4Z_0 {
      display: -webkit-box;
      display: -ms-flexbox;
      display: flex;
      -webkit-box-orient: horizontal;
      -webkit-box-direction: normal;
      -ms-flex-direction: row;
      flex-direction: row;
      -webkit-box-pack: justify;
      -ms-flex-pack: justify;
      justify-content: space-between;
      -webkit-box-align: center;
      -ms-flex-align: center;
      align-items: center;
      margin-top: 15px;
    }
    ._2sjJGcOH_0 ._3Hkula0k_0 {
      color: #b2b2b2;
      font-size: 14px;
    }
</style><ul><li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/2b/9f/5c/a1195d23.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>kq yang</span>
  </div>
  <div class="_2_QraFYR_0">同样在谷歌，联想等公司。全球化的业务维持一个框架体现，还允许更多的本地化特征，都曾是很难的选择。两者看起来都十分必要，但也很难组织协同。速卖通这样的做法现在看起来是时代给出的教科书答案了。<br><br>终局意识是极端重要的，许多时候人们开了头，但是却没法收了尾，但是那些没有烂尾的才有最终成果。终局的关键是关系链的调整改变。速卖通让大家看到了新供应链的存在，自然有人立刻就可以优化供应链，这样老的低效的供应链就失去价值了。但是，新的供应链当中你还能不能提供价值呢？那可未必。<br>新局面要求改变自身形态，而他人可能早已完成布局。这个过程能在数据中体现，但无法通过数据驱动主导完成的，它需要迭代观察、猜想、实验和验证，需要洞见，也需要赌性。</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2022-02-18 07:06:33</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/0f/8c/5c/3f164f66.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>亚林</span>
  </div>
  <div class="_2_QraFYR_0">还是人更重要</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2022-04-26 14:02:43</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/10/4b/a0/3fa531e5.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>Vicente</span>
  </div>
  <div class="_2_QraFYR_0">使用一套系统服务全球的前提应该是没有强外部依赖&#47;限制，可以自定游戏规则，在一些极度依赖本地服务的业务场景怕是不容易做得到，这种场景就很难避免一个地区&#47;市场一个系统，我实在想不到有什么好的办法把多个不同规则的系统统一起来。</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">作者回复: “在一些极度依赖本地服务的业务场景怕是不容易做得到” <br>是的， 供给侧的系统的确是这样。 </p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2022-03-22 01:35:40</div>
  </div>
</div>
</div>
</li>
</ul>