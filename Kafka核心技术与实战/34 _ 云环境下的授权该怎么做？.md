<audio title="34 _ äº‘ç¯å¢ƒä¸‹çš„æˆæƒè¯¥æ€ä¹ˆåšï¼Ÿ" src="https://static001.geekbang.org/resource/audio/30/cd/30095ea813a91514e49c747a28a17ecd.mp3" controls="controls"></audio> 
<p>ä½ å¥½ï¼Œæˆ‘æ˜¯èƒ¡å¤•ã€‚ä»Šå¤©æˆ‘è¦åˆ†äº«çš„ä¸»é¢˜æ˜¯ï¼šKafkaçš„æˆæƒæœºåˆ¶ã€‚</p><h2>ä»€ä¹ˆæ˜¯æˆæƒæœºåˆ¶ï¼Ÿ</h2><p>æˆ‘ä»¬åœ¨ä¸Šä¸€è®²ä¸­èŠ±äº†ä¸å°‘æ—¶é—´è®¨è®ºKafkaçš„è®¤è¯æœºåˆ¶ï¼Œä»Šå¤©æˆ‘ä»¬æ¥çœ‹çœ‹Kafkaçš„æˆæƒæœºåˆ¶ï¼ˆAuthorizationï¼‰ã€‚æ‰€è°“æˆæƒï¼Œä¸€èˆ¬æ˜¯æŒ‡å¯¹ä¸ä¿¡æ¯å®‰å…¨æˆ–è®¡ç®—æœºå®‰å…¨ç›¸å…³çš„èµ„æºæˆäºˆè®¿é—®æƒé™ï¼Œç‰¹åˆ«æ˜¯å­˜å–æ§åˆ¶ã€‚</p><p>å…·ä½“åˆ°æƒé™æ¨¡å‹ï¼Œå¸¸è§çš„æœ‰å››ç§ã€‚</p><ul>
<li>ACLï¼šAccess-Control Listï¼Œè®¿é—®æ§åˆ¶åˆ—è¡¨ã€‚</li>
<li>RBACï¼šRole-Based Access Controlï¼ŒåŸºäºè§’è‰²çš„æƒé™æ§åˆ¶ã€‚</li>
<li>ABACï¼šAttribute-Based Access Controlï¼ŒåŸºäºå±æ€§çš„æƒé™æ§åˆ¶ã€‚</li>
<li>PBACï¼šPolicy-Based Access Controlï¼ŒåŸºäºç­–ç•¥çš„æƒé™æ§åˆ¶ã€‚</li>
</ul><p>åœ¨å…¸å‹çš„äº’è”ç½‘åœºæ™¯ä¸­ï¼Œå‰ä¸¤ç§æ¨¡å‹åº”ç”¨å¾—å¤šï¼Œåé¢è¿™ä¸¤ç§åˆ™æ¯”è¾ƒå°‘ç”¨ã€‚</p><p>ACLæ¨¡å‹å¾ˆç®€å•ï¼Œå®ƒè¡¨å¾çš„æ˜¯ç”¨æˆ·ä¸æƒé™çš„ç›´æ¥æ˜ å°„å…³ç³»ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://static001.geekbang.org/resource/image/eb/ad/eb85325aa6858b45a53ecaae6e58d0ad.jpg?wh=1022*222" alt=""></p><p>è€ŒRBACæ¨¡å‹åˆ™åŠ å…¥äº†è§’è‰²çš„æ¦‚å¿µï¼Œæ”¯æŒå¯¹ç”¨æˆ·è¿›è¡Œåˆ†ç»„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://static001.geekbang.org/resource/image/43/aa/4368827128d1309709fe51199a11b7aa.jpg?wh=1162*222" alt=""></p><p>Kafkaæ²¡æœ‰ä½¿ç”¨RBACæ¨¡å‹ï¼Œå®ƒç”¨çš„æ˜¯ACLæ¨¡å‹ã€‚ç®€å•æ¥è¯´ï¼Œè¿™ç§æ¨¡å‹å°±æ˜¯è§„å®šäº†ä»€ä¹ˆç”¨æˆ·å¯¹ä»€ä¹ˆèµ„æºæœ‰ä»€ä¹ˆæ ·çš„è®¿é—®æƒé™ã€‚æˆ‘ä»¬å¯ä»¥å€Ÿç”¨å®˜ç½‘çš„ä¸€å¥è¯æ¥ç»Ÿä¸€è¡¨ç¤ºè¿™ç§æ¨¡å‹ï¼šâ€œ<strong>Principal P is [Allowed/Denied] Operation O From Host H On Resource R.</strong>â€ è¿™å¥è¯ä¸­å‡ºç°äº†å¾ˆå¤šä¸ªä¸»ä½“ï¼Œæˆ‘æ¥åˆ†åˆ«è§£é‡Šä¸‹å®ƒä»¬çš„å«ä¹‰ã€‚</p><!-- [[[read_end]]] --><ul>
<li>Principalï¼šè¡¨ç¤ºè®¿é—®Kafkaé›†ç¾¤çš„ç”¨æˆ·ã€‚</li>
<li>Operationï¼šè¡¨ç¤ºä¸€ä¸ªå…·ä½“çš„è®¿é—®ç±»å‹ï¼Œå¦‚è¯»å†™æ¶ˆæ¯æˆ–åˆ›å»ºä¸»é¢˜ç­‰ã€‚</li>
<li>Hostï¼šè¡¨ç¤ºè¿æ¥Kafkaé›†ç¾¤çš„å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºIPåœ°å€ã€‚Hostæ”¯æŒæ˜Ÿå·å ä½ç¬¦ï¼Œè¡¨ç¤ºæ‰€æœ‰IPåœ°å€ã€‚</li>
<li>Resourceï¼šè¡¨ç¤ºKafkaèµ„æºç±»å‹ã€‚å¦‚æœä»¥æœ€æ–°çš„2.3ç‰ˆæœ¬ä¸ºä¾‹ï¼ŒResourceå…±æœ‰5ç§ï¼Œåˆ†åˆ«æ˜¯TOPICã€CLUSTERã€GROUPã€TRANSACTIONALIDå’ŒDELEGATION TOKENã€‚</li>
</ul><p>å½“å‰ï¼ŒKafkaæä¾›äº†ä¸€ä¸ªå¯æ’æ‹”çš„æˆæƒå®ç°æœºåˆ¶ã€‚è¯¥æœºåˆ¶ä¼šå°†ä½ é…ç½®çš„æ‰€æœ‰ACLé¡¹ä¿å­˜åœ¨ZooKeeperä¸‹çš„/kafka-aclèŠ‚ç‚¹ä¸­ã€‚ä½ å¯ä»¥é€šè¿‡Kafkaè‡ªå¸¦çš„kafka-aclsè„šæœ¬åŠ¨æ€åœ°å¯¹ACLé¡¹è¿›è¡Œå¢åˆ æ”¹æŸ¥ï¼Œå¹¶è®©å®ƒç«‹å³ç”Ÿæ•ˆã€‚</p><h2>å¦‚ä½•å¼€å¯ACLï¼Ÿ</h2><p>åœ¨Kafkaä¸­ï¼Œå¼€å¯ACLçš„æ–¹æ³•ç‰¹åˆ«ç®€å•ï¼Œä½ åªéœ€è¦åœ¨Brokerç«¯çš„é…ç½®æ–‡ä»¶ä¸­å¢åŠ ä¸€è¡Œè®¾ç½®å³å¯ï¼Œä¹Ÿå°±æ˜¯åœ¨server.propertiesæ–‡ä»¶ä¸­é…ç½®ä¸‹é¢è¿™ä¸ªå‚æ•°å€¼ï¼š</p><pre><code>authorizer.class.name=kafka.security.auth.SimpleAclAuthorizer
</code></pre><p>authorizer.class.nameå‚æ•°æŒ‡å®šäº†ACLæˆæƒæœºåˆ¶çš„å®ç°ç±»ã€‚å½“å‰Kafkaæä¾›äº†Authorizeræ¥å£ï¼Œå…è®¸ä½ å®ç°ä½ è‡ªå·±çš„æˆæƒæœºåˆ¶ï¼Œä½†æ›´å¸¸è§çš„åšæ³•ï¼Œè¿˜æ˜¯ç›´æ¥ä½¿ç”¨Kafkaè‡ªå¸¦çš„<strong>SimpleAclAuthorizerå®ç°ç±»</strong>ã€‚ä¸€æ—¦è®¾ç½®å¥½è¿™ä¸ªå‚æ•°çš„å€¼ï¼Œå¹¶ä¸”å¯åŠ¨Brokeråï¼Œè¯¥Brokerå°±é»˜è®¤å¼€å¯äº†ACLæˆæƒéªŒè¯ã€‚åœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œä½ éœ€è¦ä¸ºé›†ç¾¤ä¸­çš„æ¯å°Brokeréƒ½åšæ­¤è®¾ç½®ã€‚</p><h2>è¶…çº§ç”¨æˆ·ï¼ˆSuper Userï¼‰</h2><p>åœ¨å¼€å¯äº†ACLæˆæƒä¹‹åï¼Œä½ è¿˜å¿…é¡»æ˜¾å¼åœ°ä¸ºä¸åŒç”¨æˆ·è®¾ç½®è®¿é—®æŸé¡¹èµ„æºçš„æƒé™ï¼Œå¦åˆ™ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œæ²¡æœ‰é…ç½®ä»»ä½•ACLçš„èµ„æºæ˜¯ä¸èƒ½è¢«è®¿é—®çš„ã€‚ä¸è¿‡ï¼Œè¿™é‡Œä¹Ÿæœ‰ä¸€ä¸ªä¾‹å¤–ï¼š<strong>è¶…çº§ç”¨æˆ·èƒ½å¤Ÿè®¿é—®æ‰€æœ‰çš„èµ„æºï¼Œå³ä½¿ä½ æ²¡æœ‰ä¸ºå®ƒä»¬è®¾ç½®ä»»ä½•ACLé¡¹</strong>ã€‚</p><p>é‚£ä¹ˆï¼Œæˆ‘ä»¬å¦‚ä½•åœ¨ä¸€ä¸ªKafkaé›†ç¾¤ä¸­è®¾ç½®è¶…çº§ç”¨æˆ·å‘¢ï¼Ÿæ–¹æ³•å¾ˆç®€å•ï¼Œåªéœ€è¦åœ¨Brokerç«¯çš„é…ç½®æ–‡ä»¶server.propertiesä¸­ï¼Œè®¾ç½®super.userså‚æ•°å³å¯ï¼Œæ¯”å¦‚ï¼š</p><pre><code>super.users=User:superuser1;User:superuser2
</code></pre><p><strong>æ³¨æ„ï¼Œå¦‚æœä½ è¦ä¸€æ¬¡æ€§æŒ‡å®šå¤šä¸ªè¶…çº§ç”¨æˆ·ï¼Œé‚£ä¹ˆåˆ†éš”ç¬¦æ˜¯åˆ†å·è€Œä¸æ˜¯é€—å·ï¼Œè¿™æ˜¯ä¸ºäº†é¿å…å‡ºç°ç”¨æˆ·åä¸­åŒ…å«é€—å·ä»è€Œæ— æ³•åˆ†å‰²çš„é—®é¢˜</strong>ã€‚</p><p>é™¤äº†è®¾ç½®super.userså‚æ•°ï¼ŒKafkaè¿˜æ”¯æŒå°†æ‰€æœ‰ç”¨æˆ·éƒ½é…ç½®æˆè¶…çº§ç”¨æˆ·çš„ç”¨æ³•ã€‚å¦‚æœæˆ‘ä»¬åœ¨server.propertiesæ–‡ä»¶ä¸­è®¾ç½®allow.everyone.if.no.acl.found=trueï¼Œé‚£ä¹ˆæ‰€æœ‰ç”¨æˆ·éƒ½å¯ä»¥è®¿é—®æ²¡æœ‰è®¾ç½®ä»»ä½•ACLçš„èµ„æºã€‚ä¸è¿‡ï¼Œæˆ‘ä¸ªäººä¸å¤ªå»ºè®®è¿›è¡Œè¿™æ ·çš„è®¾ç½®ã€‚æ¯•ç«Ÿï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œç‰¹åˆ«æ˜¯åœ¨é‚£äº›å¯¹å®‰å…¨æœ‰è¾ƒé«˜è¦æ±‚çš„ç¯å¢ƒä¸­ï¼Œé‡‡ç”¨ç™½åå•æœºåˆ¶è¦æ¯”é»‘åå•æœºåˆ¶æ›´åŠ ä»¤äººæ”¾å¿ƒã€‚</p><h2>kafka-aclsè„šæœ¬</h2><p>åœ¨äº†è§£äº†Kafkaçš„ACLæ¦‚å¿µä¹‹åï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å¦‚ä½•è®¾ç½®å®ƒä»¬ã€‚å½“å‰åœ¨Kafkaä¸­ï¼Œé…ç½®æˆæƒçš„æ–¹æ³•æ˜¯é€šè¿‡kafka-aclsè„šæœ¬ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœæˆ‘ä»¬è¦ä¸ºç”¨æˆ·Aliceå¢åŠ äº†é›†ç¾¤çº§åˆ«çš„æ‰€æœ‰æƒé™ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™æ®µå‘½ä»¤ã€‚</p><pre><code>$ kafka-acls --authorizer-properties zookeeper.connect=localhost:2181 --add --allow-principal User:Alice --operation All --topic '*' --cluster
</code></pre><p>åœ¨è¿™ä¸ªå‘½ä»¤ä¸­ï¼ŒAllè¡¨ç¤ºæ‰€æœ‰æ“ä½œï¼Œtopicä¸­çš„æ˜Ÿå·åˆ™è¡¨ç¤ºæ‰€æœ‰ä¸»é¢˜ï¼ŒæŒ‡å®š --clusteråˆ™è¯´æ˜æˆ‘ä»¬è¦ä¸ºAliceè®¾ç½®çš„æ˜¯é›†ç¾¤æƒé™ã€‚</p><p>è¿™ä¸ªè„šæœ¬çš„å‚æ•°æœ‰å¾ˆå¤šï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹å®ƒçš„å¦ä¸€ä¸ªå¸¸è§ç”¨æ³•ã€‚</p><pre><code>$ bin/kafka-acls --authorizer-properties zookeeper.connect=localhost:2181 --add --allow-principal User:'*' --allow-host '*' --deny-principal User:BadUser --deny-host 10.205.96.119 --operation Read --topic test-topic
</code></pre><p>Useråé¢çš„æ˜Ÿå·è¡¨ç¤ºæ‰€æœ‰ç”¨æˆ·ï¼Œallow-hoståé¢çš„æ˜Ÿå·åˆ™è¡¨ç¤ºæ‰€æœ‰IPåœ°å€ã€‚è¿™ä¸ªå‘½ä»¤çš„æ„æ€æ˜¯ï¼Œå…è®¸æ‰€æœ‰çš„ç”¨æˆ·ä½¿ç”¨ä»»æ„çš„IPåœ°å€è¯»å–åä¸ºtest-topicçš„ä¸»é¢˜æ•°æ®ï¼ŒåŒæ—¶ä¹Ÿç¦æ­¢BadUserç”¨æˆ·å’Œ10.205.96.119çš„IPåœ°å€è®¿é—®test-topicä¸‹çš„æ¶ˆæ¯ã€‚</p><p>kafka-aclsè„šæœ¬è¿˜æœ‰å…¶ä»–çš„åŠŸèƒ½ï¼Œæ¯”å¦‚åˆ é™¤ACLã€æŸ¥è¯¢å·²æœ‰ACLç­‰ã€‚å®ƒä»¬çš„å®é™…ç”¨æ³•ä¸ä¸Šé¢è¿™æ¡å‘½ä»¤ç±»ä¼¼ï¼Œæˆ‘åœ¨è¿™é‡Œå°±ä¸ä¸€ä¸€åˆ—ä¸¾äº†ï¼Œä½ å¯ä»¥ä½¿ç”¨kafka-acls.shæ¥æŸ¥è¯¢å®ƒçš„æ‰€æœ‰ç”¨æ³•ã€‚</p><h2>ACLæƒé™åˆ—è¡¨</h2><p>åˆšæ‰çš„è¿™ä¸¤æ¡å‘½ä»¤ï¼Œåˆ†åˆ«æ¶‰åŠäº†ä¸»é¢˜çš„é›†ç¾¤æƒé™å’Œè¯»æƒé™ã€‚ä½ å¯èƒ½ä¼šé—®ï¼ŒKafkaåˆ°åº•æä¾›äº†å¤šå°‘ç§ACLæƒé™å‘¢ï¼Ÿæˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹ä¸‹é¢è¿™å¼ è¡¨æ ¼ï¼Œå®ƒå®Œæ•´åœ°å±•ç¤ºäº†Kafkaæ‰€æœ‰çš„ACLæƒé™ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/62/bc/620bc02b57c49fa2d7390c698db515bc.jpg?wh=1683*8403" alt=""></p><p>çœ‹åˆ°è¿™ä¹ˆå¤§ä¸€å¼ è¡¨æ ¼ï¼Œä½ æ˜¯ä¸æ˜¯å¾ˆæƒŠè®¶ï¼Ÿå…¶å®ï¼Œè¿™æ°å¥½è¯æ˜Kafkaå½“å‰æä¾›çš„æˆæƒæœºåˆ¶æ˜¯éå¸¸ç»†ç²’åº¦çš„ã€‚ç°åœ¨ï¼Œæˆ‘æ¥è·Ÿä½ åˆ†äº«ä¸€ä¸‹è¿™ä¸ªè¡¨æ ¼çš„ä½¿ç”¨æ–¹æ³•ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼Œå‡å¦‚ä½ è¦ä¸ºä½ çš„ç”Ÿäº§è€…ç¨‹åºèµ‹äºˆå†™æƒé™ï¼Œé‚£ä¹ˆé¦–å…ˆï¼Œä½ è¦åœ¨Resourceåˆ—æ‰¾åˆ°Topicç±»å‹çš„æƒé™ï¼Œç„¶ååœ¨Operationåˆ—å¯»æ‰¾WRITEæ“ä½œæƒé™ã€‚è¿™ä¸ªWRITEæƒé™æ˜¯é™åˆ¶Producerç¨‹åºèƒ½å¦å‘å¯¹åº”ä¸»é¢˜å‘é€æ¶ˆæ¯çš„å…³é”®ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼ŒProducerç¨‹åºè¿˜å¯èƒ½æœ‰<strong>åˆ›å»ºä¸»é¢˜ã€è·å–ä¸»é¢˜æ•°æ®</strong>çš„æƒé™ï¼Œæ‰€ä»¥Kafkaä¸ºProduceréœ€è¦çš„è¿™äº›å¸¸è§æƒé™åˆ›å»ºäº†å¿«æ·æ–¹å¼ï¼Œå³ --producerã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æ‰§è¡Œkafka-aclså‘½ä»¤æ—¶ï¼Œç›´æ¥æŒ‡å®š --producerå°±èƒ½åŒæ—¶è·å¾—è¿™ä¸‰ä¸ªæƒé™äº†ã€‚ --consumerä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼ŒæŒ‡å®š --consumerå¯ä»¥åŒæ—¶è·å¾—Consumerç«¯åº”ç”¨æ‰€éœ€çš„æƒé™ã€‚</p><h2>æˆæƒæœºåˆ¶èƒ½å¦å•ç‹¬ä½¿ç”¨ï¼Ÿ</h2><p>å…³äºæˆæƒï¼Œæœ‰ä¸€ä¸ªå¾ˆå¸¸è§çš„é—®é¢˜æ˜¯ï¼ŒKafkaæˆæƒæœºåˆ¶èƒ½ä¸é…ç½®è®¤è¯æœºåˆ¶è€Œå•ç‹¬ä½¿ç”¨å—ï¼Ÿå…¶å®ï¼Œè¿™æ˜¯å¯ä»¥çš„ï¼Œåªæ˜¯ä½ åªèƒ½ä¸ºIPåœ°å€è®¾ç½®æƒé™ã€‚æ¯”å¦‚ï¼Œä¸‹é¢è¿™ä¸ªå‘½ä»¤ä¼šç¦æ­¢è¿è¡Œåœ¨127.0.0.1IPåœ°å€ä¸Šçš„Produceråº”ç”¨å‘testä¸»é¢˜å‘é€æ•°æ®ï¼š</p><pre><code>$ bin/kafka-acls.sh --authorizer-properties zookeeper.connect=localhost:2181 --add --deny-principal User:* --deny-host 127.0.0.1 --operation Write --topic test

$ bin/kafka-console-producer.sh --broker-list localhost:9092 --topic test
&gt;hello
[2019-07-16 10:10:57,283] WARN [Producer clientId=console-producer] Error while fetching metadata with correlation id 3 : {test=TOPIC_AUTHORIZATION_FAILED} (org.apache.kafka.clients.NetworkClient)
[2019-07-16 10:10:57,284] ERROR [Producer clientId=console-producer] Topic authorization failed for topics [test] (org.apache.kafka.clients.Metadata)
[2019-07-16 10:10:57,284] ERROR Error when sending message to topic test with key: null, value: 5 bytes with error: (org.apache.kafka.clients.producer.internals.ErrorLoggingCallback)
org.apache.kafka.common.errors.TopicAuthorizationException: <span class="orange">Not authorized to access topics: [test]</span>
</code></pre><p>è¯·æ³¨æ„ä¸€ä¸‹è¾“å‡ºä¸­çš„æ©™è‰²å­—ä½“éƒ¨åˆ†ã€‚è™½ç„¶æ²¡æœ‰è®¾ç½®ä»»ä½•è®¤è¯æœºåˆ¶ï¼Œä½†æ˜¯é€šè¿‡è®¾ç½®IPåœ°å€çš„ACLæˆæƒï¼Œæˆ‘ä»¬ä¾ç„¶å¯ä»¥ç¦æ­¢è¿™äº›IPåœ°å€ä¸Šçš„å®¢æˆ·ç«¯è®¿é—®Kafkaèµ„æºã€‚ä¸è¿‡ï¼Œå°½ç®¡æˆæƒæœºåˆ¶èƒ½å¤Ÿæœ‰é™åº¦åœ°å•ç‹¬ä½¿ç”¨ï¼Œä½†æˆ‘æ›´æ¨èçš„åšæ³•æ˜¯ï¼Œå’Œæˆ‘ä»¬åœ¨ä¸“æ ä¸Šä¸€è®²æåˆ°çš„è®¤è¯æœºåˆ¶æ­é…ä½¿ç”¨ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘æ¥ç»™å‡ºä¸€ä¸ªSSL + ACLé…ç½®çš„å®ä¾‹ï¼Œæ¥æ¼”ç¤ºä¸€ä¸‹äº‘ç¯å¢ƒä¸‹çš„ACLæˆæƒåº”è¯¥æ€ä¹ˆåšã€‚</p><h2>é…ç½®å®ä¾‹</h2><p>åœ¨æ¼”ç¤ºACLä¹‹å‰ï¼Œæˆ‘å…ˆç®€å•è¯´ä¸€ä¸‹SSLçš„é…ç½®ã€‚æˆ‘ç»™å‡ºä¸€ä¸ªSHELLè„šæœ¬ï¼Œå®ƒå¯ä»¥æ–¹ä¾¿ä½ è®¾ç½®SSLï¼Œä»£ç å¦‚ä¸‹ï¼š</p><pre><code>#!/bin/bash

#è®¾ç½®ç¯å¢ƒå˜é‡
BASE_DIR=/Users/huxi/testenv #ä½ éœ€è¦ä¿®æ”¹æ­¤å¤„
CERT_OUTPUT_PATH=&quot;$BASE_DIR/certificates&quot;
PASSWORD=test1234
KEY_STORE=&quot;$CERT_OUTPUT_PATH/server.keystore.jks&quot;
TRUST_STORE=&quot;$CERT_OUTPUT_PATH/server.truststore.jks&quot;
CLIENT_KEY_STORE=&quot;$CERT_OUTPUT_PATH/client.keystore.jks&quot;
CLIENT_TRUST_STORE=&quot;$CERT_OUTPUT_PATH/client.truststore.jks&quot;
KEY_PASSWORD=$PASSWORD
STORE_PASSWORD=$PASSWORD
TRUST_KEY_PASSWORD=$PASSWORD
TRUST_STORE_PASSWORD=$PASSWORD
CERT_AUTH_FILE=&quot;$CERT_OUTPUT_PATH/ca-cert&quot;
DAYS_VALID=365
DNAME=&quot;CN=Xi Hu, OU=YourDept, O=YourCompany, L=Beijing, ST=Beijing, C=CN&quot;


mkdir -p $CERT_OUTPUT_PATH

echo &quot;1. äº§ç”Ÿkeyå’Œè¯ä¹¦......&quot;
keytool -keystore $KEY_STORE -alias kafka-server -validity $DAYS_VALID -genkey -keyalg RSA \
-storepass $STORE_PASSWORD -keypass $KEY_PASSWORD -dname &quot;$DNAME&quot;

keytool -keystore $CLIENT_KEY_STORE -alias kafka-client -validity $DAYS_VALID -genkey -keyalg RSA \
-storepass $STORE_PASSWORD -keypass $KEY_PASSWORD -dname &quot;$DNAME&quot;

echo &quot;2. åˆ›å»ºCA......&quot;
openssl req -new -x509 -keyout $CERT_OUTPUT_PATH/ca-key -out &quot;$CERT_AUTH_FILE&quot; -days &quot;$DAYS_VALID&quot; \
-passin pass:&quot;$PASSWORD&quot; -passout pass:&quot;$PASSWORD&quot; \
-subj &quot;/C=CN/ST=Beijing/L=Beijing/O=YourCompany/OU=YourDept,CN=Xi Hu&quot;

echo &quot;3. æ·»åŠ CAæ–‡ä»¶åˆ°broker truststore......&quot;
keytool -keystore &quot;$TRUST_STORE&quot; -alias CARoot \
-importcert -file &quot;$CERT_AUTH_FILE&quot; -storepass &quot;$TRUST_STORE_PASSWORD&quot; -keypass &quot;$TRUST_KEY_PASS&quot; -noprompt

echo &quot;4. æ·»åŠ CAæ–‡ä»¶åˆ°client truststore......&quot;
keytool -keystore &quot;$CLIENT_TRUST_STORE&quot; -alias CARoot \
-importcert -file &quot;$CERT_AUTH_FILE&quot; -storepass &quot;$TRUST_STORE_PASSWORD&quot; -keypass &quot;$TRUST_KEY_PASS&quot; -noprompt

echo &quot;5. ä»keystoreä¸­å¯¼å‡ºé›†ç¾¤è¯ä¹¦......&quot;
keytool -keystore &quot;$KEY_STORE&quot; -alias kafka-server -certreq -file &quot;$CERT_OUTPUT_PATH/server-cert-file&quot; \
-storepass &quot;$STORE_PASSWORD&quot; -keypass &quot;$KEY_PASSWORD&quot; -noprompt

keytool -keystore &quot;$CLIENT_KEY_STORE&quot; -alias kafka-client -certreq -file &quot;$CERT_OUTPUT_PATH/client-cert-file&quot; \
-storepass &quot;$STORE_PASSWORD&quot; -keypass &quot;$KEY_PASSWORD&quot; -noprompt

echo &quot;6. ä½¿ç”¨CAç­¾å‘è¯ä¹¦......&quot;
openssl x509 -req -CA &quot;$CERT_AUTH_FILE&quot; -CAkey $CERT_OUTPUT_PATH/ca-key -in &quot;$CERT_OUTPUT_PATH/server-cert-file&quot; \
-out &quot;$CERT_OUTPUT_PATH/server-cert-signed&quot; -days &quot;$DAYS_VALID&quot; -CAcreateserial -passin pass:&quot;$PASSWORD&quot;

openssl x509 -req -CA &quot;$CERT_AUTH_FILE&quot; -CAkey $CERT_OUTPUT_PATH/ca-key -in &quot;$CERT_OUTPUT_PATH/client-cert-file&quot; \
-out &quot;$CERT_OUTPUT_PATH/client-cert-signed&quot; -days &quot;$DAYS_VALID&quot; -CAcreateserial -passin pass:&quot;$PASSWORD&quot;

echo &quot;7. å¯¼å…¥CAæ–‡ä»¶åˆ°keystore......&quot;
keytool -keystore &quot;$KEY_STORE&quot; -alias CARoot -import -file &quot;$CERT_AUTH_FILE&quot; -storepass &quot;$STORE_PASSWORD&quot; \
 -keypass &quot;$KEY_PASSWORD&quot; -noprompt

keytool -keystore &quot;$CLIENT_KEY_STORE&quot; -alias CARoot -import -file &quot;$CERT_AUTH_FILE&quot; -storepass &quot;$STORE_PASSWORD&quot; \
 -keypass &quot;$KEY_PASSWORD&quot; -noprompt

echo &quot;8. å¯¼å…¥å·²ç­¾å‘è¯ä¹¦åˆ°keystore......&quot;
keytool -keystore &quot;$KEY_STORE&quot; -alias kafka-server -import -file &quot;$CERT_OUTPUT_PATH/server-cert-signed&quot; \
 -storepass &quot;$STORE_PASSWORD&quot; -keypass &quot;$KEY_PASSWORD&quot; -noprompt

keytool -keystore &quot;$CLIENT_KEY_STORE&quot; -alias kafka-client -import -file &quot;$CERT_OUTPUT_PATH/client-cert-signed&quot; \
 -storepass &quot;$STORE_PASSWORD&quot; -keypass &quot;$KEY_PASSWORD&quot; -noprompt

echo &quot;9. åˆ é™¤ä¸´æ—¶æ–‡ä»¶......&quot;
rm &quot;$CERT_OUTPUT_PATH/ca-cert.srl&quot;
rm &quot;$CERT_OUTPUT_PATH/server-cert-signed&quot;
rm &quot;$CERT_OUTPUT_PATH/client-cert-signed&quot;
rm &quot;$CERT_OUTPUT_PATH/server-cert-file&quot;
rm &quot;$CERT_OUTPUT_PATH/client-cert-file&quot;
</code></pre><p>ä½ å¯ä»¥æŠŠä¸Šé¢çš„ä»£ç ä¿å­˜æˆä¸€ä¸ªSHELLè„šæœ¬ï¼Œç„¶ååœ¨ä¸€å°Brokerä¸Šè¿è¡Œã€‚è¯¥è„šæœ¬ä¸»è¦çš„äº§å‡ºæ˜¯4ä¸ªæ–‡ä»¶ï¼Œåˆ†åˆ«æ˜¯ï¼šserver.keystore.jksã€server.truststore.jksã€client.keystore.jkså’Œclient.truststore.jksã€‚</p><p>ä½ éœ€è¦æŠŠä»¥serverå¼€å¤´çš„ä¸¤ä¸ªæ–‡ä»¶ï¼Œæ‹·è´åˆ°é›†ç¾¤ä¸­çš„æ‰€æœ‰Brokeræœºå™¨ä¸Šï¼ŒæŠŠä»¥clientå¼€å¤´çš„ä¸¤ä¸ªæ–‡ä»¶ï¼Œæ‹·è´åˆ°æ‰€æœ‰è¦è¿æ¥Kafkaé›†ç¾¤çš„å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºæœºå™¨ä¸Šã€‚</p><p>æ¥ç€ï¼Œä½ è¦é…ç½®æ¯ä¸ªBrokerçš„server.propertiesæ–‡ä»¶ï¼Œå¢åŠ ä»¥ä¸‹å†…å®¹ï¼š</p><pre><code>listeners=SSL://localhost:9093
ssl.truststore.location=/Users/huxi/testenv/certificates/server.truststore.jks
ssl.truststore.password=test1234
ssl.keystore.location=/Users/huxi/testenv/certificates/server.keystore.jks
ssl.keystore.password=test1234
security.inter.broker.protocol=SSL
ssl.client.auth=required
ssl.key.password=test1234
</code></pre><p>ç°åœ¨æˆ‘ä»¬å¯åŠ¨Brokerè¿›ç¨‹ã€‚å€˜è‹¥ä½ å‘ç°æ— æ³•å¯åŠ¨æˆ–å¯åŠ¨å¤±è´¥ï¼Œé‚£ä¹ˆä½ éœ€è¦æ£€æŸ¥ä¸€ä¸‹æŠ¥é”™ä¿¡æ¯ï¼Œçœ‹çœ‹å’Œä¸Šé¢çš„å“ªäº›é…ç½®æœ‰å…³ï¼Œç„¶åæœ‰é’ˆå¯¹æ€§åœ°è¿›è¡Œè°ƒæ•´ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥é…ç½®å®¢æˆ·ç«¯çš„SSLã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬è¦åˆ›å»ºä¸€ä¸ªåä¸ºclient-ssl.configçš„æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><pre><code>security.protocol=SSL
ssl.truststore.location=/Users/huxi/testenv/certificates/client.truststore.jks
ssl.truststore.password=test1234
ssl.keystore.location=/Users/huxi/testenv/certificates/server.keystore.jks
ssl.keystore.password=test1234
ssl.key.password=test1234
ssl.endpoint.identification.algorithm=
</code></pre><p>æ³¨æ„ï¼Œä¸€å®šè¦åŠ ä¸Šæœ€åä¸€è¡Œã€‚å› ä¸ºè‡ªKafka 2.0ç‰ˆæœ¬å¼€å§‹ï¼Œå®ƒé»˜è®¤ä¼šéªŒè¯æœåŠ¡å™¨ç«¯çš„ä¸»æœºåæ˜¯å¦åŒ¹é…Brokerç«¯è¯ä¹¦é‡Œçš„ä¸»æœºåã€‚å¦‚æœä½ è¦ç¦æ‰æ­¤åŠŸèƒ½çš„è¯ï¼Œä¸€å®šè¦å°†è¯¥å‚æ•°è®¾ç½®ä¸ºç©ºå­—ç¬¦ä¸²ã€‚</p><p>é…ç½®å¥½è¿™äº›ï¼Œä½ å¯ä»¥ä½¿ç”¨ConsoleConsumerå’ŒConsoleProduceræ¥æµ‹è¯•ä¸€ä¸‹Producerå’ŒConsumeræ˜¯å¦èƒ½å¤Ÿæ­£å¸¸å·¥ä½œã€‚æ¯”å¦‚ï¼Œä¸‹åˆ—å‘½ä»¤æŒ‡å®šproducer-configæŒ‡å‘åˆšæ‰æˆ‘ä»¬åˆ›å»ºçš„client-sslé…ç½®æ–‡ä»¶ã€‚</p><pre><code>$ bin/kafka-console-producer.sh --broker-list localhost:9093 --topic test --producer.config client-ssl.config
</code></pre><p>å¥½äº†ï¼Œç°åœ¨æˆ‘ä»¬æ¥è¯´è¯´ACLçš„é…ç½®ã€‚</p><p>å¦‚æœä½ åœ¨è¿è¥ä¸€ä¸ªäº‘ä¸Šçš„Kafkaé›†ç¾¤ï¼Œé‚£ä¹ˆåŠ¿å¿…ä¼šé¢ä¸´å¤šç§Ÿæˆ·çš„é—®é¢˜ã€‚<strong>é™¤äº†è®¾ç½®åˆç†çš„è®¤è¯æœºåˆ¶å¤–ï¼Œä¸ºæ¯ä¸ªè¿æ¥Kafkaé›†ç¾¤çš„å®¢æˆ·ç«¯æˆäºˆæ°å½“çš„æƒé™ï¼Œä¹Ÿæ˜¯éå¸¸å…³é”®çš„</strong>ã€‚ç°åœ¨æˆ‘æ¥ç»™å‡ºä¸€äº›æœ€ä½³å®è·µã€‚</p><p>ç¬¬ä¸€ï¼Œå°±åƒå‰é¢è¯´çš„ï¼Œè¦å¼€å¯ACLï¼Œä½ éœ€è¦è®¾ç½®authorizer.class.name=kafka.security.auth.SimpleAclAuthorizerã€‚</p><p>ç¬¬äºŒï¼Œæˆ‘å»ºè®®ä½ é‡‡ç”¨ç™½åå•æœºåˆ¶ï¼Œè¿™æ ·çš„è¯ï¼Œæ²¡æœ‰æ˜¾å¼è®¾ç½®æƒé™çš„ç”¨æˆ·å°±æ— æƒè®¿é—®ä»»ä½•èµ„æºã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨Kafkaçš„server.propertiesæ–‡ä»¶ä¸­ï¼Œä¸è¦è®¾ç½®allow.everyone.if.no.acl.found=trueã€‚</p><p>ç¬¬ä¸‰ï¼Œä½ å¯ä»¥ä½¿ç”¨kafka-aclsè„šæœ¬ä¸ºSSLç”¨æˆ·æˆäºˆé›†ç¾¤çš„æƒé™ã€‚æˆ‘ä»¬ä»¥å‰é¢çš„ä¾‹å­æ¥è¿›è¡Œä¸€ä¸‹è¯´æ˜ã€‚</p><p>åœ¨é…ç½®SSLæ—¶ï¼Œæˆ‘ä»¬æŒ‡å®šç”¨æˆ·çš„Distinguished Nameä¸ºâ€œCN=Xi Hu, OU=YourDept, O=YourCompany, L=Beijing, ST=Beijing, C=CNâ€ã€‚ä¹‹å‰åœ¨è®¾ç½®Brokerç«¯å‚æ•°æ—¶ï¼Œæˆ‘ä»¬æŒ‡å®šäº†security.inter.broker.protocol=SSLï¼Œå³å¼ºåˆ¶æŒ‡å®šBrokeré—´çš„é€šè®¯ä¹Ÿé‡‡ç”¨SSLåŠ å¯†ã€‚</p><p>å¦‚æœä¸ä¸ºæŒ‡å®šçš„Distinguished Nameæˆäºˆé›†ç¾¤æ“ä½œçš„æƒé™ï¼Œä½ æ˜¯æ— æ³•æˆåŠŸå¯åŠ¨Brokerçš„ã€‚å› æ­¤ï¼Œä½ éœ€è¦åœ¨å¯åŠ¨Brokerä¹‹å‰æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</p><pre><code>$ bin/kafka-acls.sh --authorizer-properties zookeeper.connect=localhost:2181 --add --allow-principal User:&quot;CN=Xi Hu,OU=YourDept,O=YourCompany,L=Beijing,ST=Beijing,C=CN&quot; --operation All --cluster
</code></pre><p>ç¬¬å››ï¼Œä½ è¦ä¸ºå®¢æˆ·ç«¯ç¨‹åºæˆäºˆç›¸åº”çš„æƒé™ï¼Œæ¯”å¦‚ä¸ºç”Ÿäº§è€…æˆäºˆproduceræƒé™ï¼Œä¸ºæ¶ˆè´¹è€…æˆäºˆconsumeræƒé™ã€‚å‡è®¾å®¢æˆ·ç«¯è¦è®¿é—®çš„ä¸»é¢˜åå­—æ˜¯testï¼Œé‚£ä¹ˆå‘½ä»¤å¦‚ä¸‹ï¼š</p><pre><code>$ bin/kafka-acls.sh --authorizer-properties zookeeper.connect=localhost:2181 --add --allow-principal User:&quot;CN=Xi Hu,OU=YourDept,O=YourCompany,L=Beijing,ST=Beijing,C=CN&quot; --producer --topic 'test'
</code></pre><pre><code>$ bin/kafka-acls.sh --authorizer-properties zookeeper.connect=localhost:2181 --add --allow-principal User:&quot;CN=Xi Hu,OU=YourDept,O=YourCompany,L=Beijing,ST=Beijing,C=CN&quot; --consumer --topic 'test' --group '*'
</code></pre><p>æ³¨æ„è¿™ä¸¤æ¡å‘½ä»¤ä¸­çš„ --producerå’Œ --consumerï¼Œå®ƒä»¬ç±»ä¼¼äºä¸€ä¸ªå¿«æ·æ–¹å¼ï¼Œç›´æ¥å°†Producerå’ŒConsumerå¸¸ç”¨çš„æƒé™è¿›è¡Œäº†ä¸€æ¬¡æ€§çš„æˆäºˆã€‚</p><p>ä½œä¸ºäº‘ç¯å¢ƒPaaSç®¡ç†å‘˜ï¼Œé™¤äº†ä»¥ä¸Šè¿™äº›å¿…è¦çš„æƒé™ï¼Œä½ æœ€å¥½ä¸è¦æŠŠå…¶ä»–æƒé™æˆäºˆå®¢æˆ·ç«¯ï¼Œæ¯”å¦‚åˆ›å»ºä¸»é¢˜çš„æƒé™ã€‚æ€»ä¹‹ï¼Œä½ æˆäºˆçš„æƒé™è¶Šå°‘ï¼Œä½ çš„Kafkaé›†ç¾¤å°±è¶Šå®‰å…¨ã€‚</p><h2>å°ç»“</h2><p>è®²åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°±å®Œæ•´åœ°æŠŠKafkaæˆæƒæœºåˆ¶æ¢³ç†äº†ä¸€éã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘è¿˜é™„èµ äº†SSLç«¯é…ç½®æ–¹æ³•ã€‚å¸Œæœ›ä½ èƒ½å°†è¿™ä¸¤è®²å…³äºå®‰å…¨é…ç½®çš„å†…å®¹ç»“åˆèµ·æ¥å­¦ä¹ ï¼Œæ‰“é€ ä¸€ä¸ªè¶…çº§å®‰å…¨çš„Kafkaé›†ç¾¤ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/39/66/39431082a84db9a3ed0dacd085f60f66.jpg?wh=2069*2535" alt=""></p><h2>å¼€æ”¾è®¨è®º</h2><p>Kafkaæä¾›çš„æƒé™æœ‰å¾ˆå¤šç§ï¼Œæˆ‘ä»¬ä»Šå¤©è®¨è®ºçš„å†…å®¹åªè¦†ç›–äº†å…¶ä¸­æœ€é‡è¦çš„å‡ ä¸ªæƒé™ã€‚å¦‚æœè¦è®©ä¸€ä¸ªå®¢æˆ·ç«¯èƒ½å¤ŸæŸ¥è¯¢æ¶ˆè´¹è€…ç»„çš„æäº¤ä½ç§»æ•°æ®ï¼Œä½ è§‰å¾—åº”è¯¥æˆäºˆå®ƒä»€ä¹ˆæƒé™ï¼Ÿ</p><p>æ¬¢è¿å†™ä¸‹ä½ çš„æ€è€ƒå’Œç­”æ¡ˆï¼Œæˆ‘ä»¬ä¸€èµ·è®¨è®ºã€‚å¦‚æœä½ è§‰å¾—æœ‰æ‰€æ”¶è·ï¼Œä¹Ÿæ¬¢è¿æŠŠæ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚</p><p></p>
<style>
    ul {
      list-style: none;
      display: block;
      list-style-type: disc;
      margin-block-start: 1em;
      margin-block-end: 1em;
      margin-inline-start: 0px;
      margin-inline-end: 0px;
      padding-inline-start: 40px;
    }
    li {
      display: list-item;
      text-align: -webkit-match-parent;
    }
    ._2sjJGcOH_0 {
      list-style-position: inside;
      width: 100%;
      display: -webkit-box;
      display: -ms-flexbox;
      display: flex;
      -webkit-box-orient: horizontal;
      -webkit-box-direction: normal;
      -ms-flex-direction: row;
      flex-direction: row;
      margin-top: 26px;
      border-bottom: 1px solid rgba(233,233,233,0.6);
    }
    ._2sjJGcOH_0 ._3FLYR4bF_0 {
      width: 34px;
      height: 34px;
      -ms-flex-negative: 0;
      flex-shrink: 0;
      border-radius: 50%;
    }
    ._2sjJGcOH_0 ._36ChpWj4_0 {
      margin-left: 0.5rem;
      -webkit-box-flex: 1;
      -ms-flex-positive: 1;
      flex-grow: 1;
      padding-bottom: 20px;
    }
    ._2sjJGcOH_0 ._36ChpWj4_0 ._2zFoi7sd_0 {
      font-size: 16px;
      color: #3d464d;
      font-weight: 500;
      -webkit-font-smoothing: antialiased;
      line-height: 34px;
    }
    ._2sjJGcOH_0 ._36ChpWj4_0 ._2_QraFYR_0 {
      margin-top: 12px;
      color: #505050;
      -webkit-font-smoothing: antialiased;
      font-size: 14px;
      font-weight: 400;
      white-space: normal;
      word-break: break-all;
      line-height: 24px;
    }
    ._2sjJGcOH_0 ._10o3OAxT_0 {
      margin-top: 18px;
      border-radius: 4px;
      background-color: #f6f7fb;
    }
    ._2sjJGcOH_0 ._3klNVc4Z_0 {
      display: -webkit-box;
      display: -ms-flexbox;
      display: flex;
      -webkit-box-orient: horizontal;
      -webkit-box-direction: normal;
      -ms-flex-direction: row;
      flex-direction: row;
      -webkit-box-pack: justify;
      -ms-flex-pack: justify;
      justify-content: space-between;
      -webkit-box-align: center;
      -ms-flex-align: center;
      align-items: center;
      margin-top: 15px;
    }
    ._2sjJGcOH_0 ._10o3OAxT_0 ._3KxQPN3V_0 {
      color: #505050;
      -webkit-font-smoothing: antialiased;
      font-size: 14px;
      font-weight: 400;
      white-space: normal;
      word-break: break-word;
      padding: 20px 20px 20px 24px;
    }
    ._2sjJGcOH_0 ._3klNVc4Z_0 {
      display: -webkit-box;
      display: -ms-flexbox;
      display: flex;
      -webkit-box-orient: horizontal;
      -webkit-box-direction: normal;
      -ms-flex-direction: row;
      flex-direction: row;
      -webkit-box-pack: justify;
      -ms-flex-pack: justify;
      justify-content: space-between;
      -webkit-box-align: center;
      -ms-flex-align: center;
      align-items: center;
      margin-top: 15px;
    }
    ._2sjJGcOH_0 ._3Hkula0k_0 {
      color: #b2b2b2;
      font-size: 14px;
    }
</style><ul><li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/14/64/9b/d1ab239e.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>J.Smile</span>
  </div>
  <div class="_2_QraFYR_0">æ€è€ƒé¢˜ï¼šåº”è¯¥æ˜¯æ¶ˆè´¹è€…ç«¯çš„TOPICçš„WRITEæƒé™</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: ğŸ‘</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2020-06-20 14:42:34</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/11/51/0d/fc1652fe.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>James</span>
  </div>
  <div class="_2_QraFYR_0">ä¸ºå•¥æ˜¯æ¶ˆè´¹è€…ç«¯çš„TOPICçš„WRITEæƒé™</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: æºç è§„å®šçš„</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2020-07-04 18:07:08</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/16/3e/22/7271859e.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>æ‹ˆèŠ±å¾®ç¬‘</span>
  </div>
  <div class="_2_QraFYR_0">è€å¸ˆ,æˆ‘ä»Šå¤©åœ¨ideaä¸‹æ­å»ºkafkaæºç ,å‡†å¤‡ç ”ç©¶ä¸€ä¸‹,gradleç¼–è¯‘è¿‡äº†,ä½†åœ¨ideaé‡Œç¼–è¯‘ä¸è¿‡,åœ¨clientå¯¹åº”çš„é¡¹ç›®æŠ¥è¿™ä¸ªé”™:Error:(19, 39) java: ç¨‹åºåŒ…org.apache.kafka.common.messageä¸å­˜åœ¨.<br>kafkaæºç ç‰ˆæœ¬æ˜¯V2.3.0, scalaçš„ç‰ˆæœ¬æ˜¯2.12.7,æºç ç¼ºå¤±äº†mesage,æ€ä¹ˆè§£å†³?<br>æˆ‘è¯•äº†V2.2.1ç‰ˆæœ¬,ä»ç„¶æ˜¯ä¸€æ ·çš„é—®é¢˜.</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: å—¯å—¯ï¼Œæ–°ç‰ˆkafkaå°†requestå’Œresponseçš„æ ¼å¼ç±»æ”¹æˆè‡ªåŠ¨ç”Ÿæˆäº†ã€‚ä½ å¯ä»¥è¿è¡Œåœ¨Kafkaæºç ç›®å½•ä¸‹è¿è¡Œ.&#47;gradlewé‡æ–°ç”Ÿæˆä¸€éï¼Œç„¶åå†å¯¼å…¥åˆ°IDEA</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2019-08-20 18:24:07</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/18/3f/37/e74c878b.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>è€é™ˆçš„ç©ºé…’æ¡¶</span>
  </div>
  <div class="_2_QraFYR_0">ä½ å¥½ï¼Œèƒ¡å¤•è€å¸ˆï¼Œkafka_version=2.12.2.3.0ï¼Œä½¿ç”¨çš„æˆæƒæ–¹å¼æ˜¯SASL_PLAINTEXTï¼Œåœ¨config&#47;server.propertiesé…ç½®allow.everyone.if.no.acl.found=trueï¼Œä½¿ç”¨æœªè®¾ç½®æƒé™çš„topicï¼Œå‘é€æ¶ˆæ¯ï¼Œä¼šæœ‰æˆæƒå¤±è´¥çš„æ—¥å¿—ã€‚<br>æ—¥å¿—å¦‚ä¸‹ï¼š<br>SocketServer brokerId=0] Failed authentication with &#47;10.192.0.1 (Unexpected Kafka request of type METADATA during SASL handshake.) (org.apache.kafka.common.network.Selector)<br>é’ˆå¯¹æ­¤é—®é¢˜ï¼Œè€å¸ˆå›ç­”éœ€è¦èµ‹å€¼METADATAè¯·æ±‚çš„æƒé™ï¼Œèƒ½é—®ä¸€ä¸‹å…·ä½“æ˜¯é…ç½®ä»€ä¹ˆå‘¢ï¼Ÿ<br></div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: è¯•è¯•TOPICçš„DESCRIBEæƒé™</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2020-03-30 09:39:19</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLl9nj9b6RydKADq82ZwOad0fQcvXWyQKk5U5RFC2kzHGI4GjIQsIZvHsEm7mFELgMiaGx3lGq9vag/132"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>å’¸æ·¡ä¸€é¦–è¯—</span>
  </div>
  <div class="_2_QraFYR_0">èƒ¡è€å¸ˆï¼ŒACL æƒé™åˆ—è¡¨ä¸­çš„ä¸‰åˆ— Operationï¼ŒResourceï¼ŒAPIæ²¡æœ‰æ˜ç™½å…·ä½“ä»€ä¹ˆæ„æ€ï¼Œæ¯”å¦‚ï¼š<br>READ Topic Fetch<br>READ Topic OffsetCommit<br>READ Topic TxnOffsetCommit<br>è¿™ä¸‰ä¸ªREAD åªæœ‰API åˆ—ä¸åŒï¼Œæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œä»–ä»¬æ€ä¹ˆä¸å‘½ä»¤è¡Œå‚æ•°åŒ¹é…å’Œä½¿ç”¨çš„ï¼Ÿ</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: è¿™è¡¨ç¤ºFetchã€OffsetCommitå’ŒTnxOffsetCommitè¯·æ±‚éœ€è¦Topicçš„READæƒé™</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2020-03-14 10:45:20</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/12/80/d8/17a5e3ec.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>èŠ±å¼€æ¼«å¤</span>
  </div>
  <div class="_2_QraFYR_0">èƒ¡è€å¸ˆæ‚¨å¥½ï¼Œä¸Šæ–‡ SASL å’Œæœ¬æ–‡çš„ SSL + ACL æ–¹æ¡ˆå¦‚ä½•é€‰æ‹©ï¼Ÿ</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: SASLæ˜¯åšè®¤è¯çš„ï¼Œæœ¬æ–‡çš„SSL+ACLä¸»è¦æ˜¯æˆæƒã€‚å®ƒä»¬æ˜¯ä¸¤å›äº‹ï¼Œä¸çŸ›ç›¾çš„ã€‚å½“ç„¶ä½ å¯ä»¥é€‰æ‹©SASL+ACL</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2020-02-19 00:40:55</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src=""
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>13761642169</span>
  </div>
  <div class="_2_QraFYR_0">ä½ å¥½ï¼Œèƒ¡å¤•è€å¸ˆï¼Œkafka_version=2.12.2.3.0ï¼Œä½¿ç”¨çš„æˆæƒæ–¹å¼æ˜¯SASL_PLAINTEXTï¼Œåœ¨config&#47;server.propertiesé…ç½®allow.everyone.if.no.acl.found=trueï¼Œä½¿ç”¨æœªè®¾ç½®æƒé™çš„topicï¼Œå‘é€æ¶ˆæ¯ï¼Œä¼šæœ‰æˆæƒå¤±è´¥çš„æ—¥å¿—ã€‚<br>æ—¥å¿—å¦‚ä¸‹ï¼š<br>SocketServer brokerId=0] Failed authentication with &#47;10.192.0.1 (Unexpected Kafka request of type METADATA during SASL handshake.) (org.apache.kafka.common.network.Selector)</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: éœ€è¦èµ‹å€¼METADATAè¯·æ±‚çš„æƒé™</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2019-08-26 18:56:02</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/15/3a/70/a874d69c.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>Mick</span>
  </div>
  <div class="_2_QraFYR_0">è®©ä¸€ä¸ªå®¢æˆ·ç«¯èƒ½å¤ŸæŸ¥è¯¢æ¶ˆè´¹è€…ç»„çš„æäº¤ä½ç§»æ•°æ®:<br>kafka-acls --authorizer-properties zookeeper.connect=localhost:2181 --add --allow-principal User:&quot;CN=Xi Hu,OU=YourDept,O=YourCompany,L=Beijing,ST=Beijing,C=CN&quot; --OffsetCommit  --operation Read  --group &quot;group_id&quot;<br>è€å¸ˆä¸çŸ¥é“è¿™ä¹ˆå†™å¯¹ä¸å¯¹ï¼Ÿ</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: éœ€è¦èµ‹äºˆGroupçš„READæƒé™ï¼Œå› ä¸ºREADæƒé™è‡ªåŠ¨åŒ…å«OffsetCommitï¼šï¼‰</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2019-10-09 14:23:08</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJUJKviaecwxpAZCAnHWap86kXUichv5JwUoAtrUNy4ugC0kMMmssFDdyayKFgAoA9Z62sqMZaibbvUg/132"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>Geek_edc612</span>
  </div>
  <div class="_2_QraFYR_0">ä¸å¤ªæ‡‚æœ€åè¿™å—çš„æˆæƒï¼š<br>bin&#47;kafka-acls.sh --authorizer-properties zookeeper.connect=localhost:2181 --add --allow-principal User:&quot;CN=Xi Hu,OU=YourDept,O=YourCompany,L=Beijing,ST=Beijing,C=CN&quot; --consumer --topic &#39;test&#39; --group &#39;*&#39;<br><br>ä¸ºå•¥è¿™ä¸ªç”¨æˆ·åè¿™ä¹ˆé•¿ï¼Œè¿™æ˜¯æˆæƒçš„sslçš„ç”¨æˆ·åå—ï¼Ÿ</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: æ˜¯çš„ã€‚è¿™ä¸ªæ˜¯æˆ‘ç”¨æ¥æ¼”ç¤ºçš„SSLç”¨æˆ·</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2019-08-20 10:14:24</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/UDSr5g1R69SNREVRwhfMiaFcuPE9fxG1jJQyiaYJLhjUoZW22IF2icQibRzNL75KwyhiakxUiaJbrFq8kAWjBYJGRGgA/132"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>éŸ¦å®é¡º</span>
  </div>
  <div class="_2_QraFYR_0">1.client-ssl.config æ–‡ä»¶è®¾ç½®çš„æ˜¯serverï¼Œæ˜¯ä¸æ˜¯é”™äº†ï¼Ÿ<br>ssl.keystore.location=&#47;Users&#47;huxi&#47;testenv&#47;certificates&#47;server.keystore.jks<br><br><br>2.DNAME æ˜¯å¹²å˜›ç”¨çš„ï¼Ÿ æ˜¯sslç”¨æˆ·ï¼Ÿ<br><br>3.ssl çš„ç”¨æˆ·ä»å“ªé‡Œæ¥ï¼Ÿæ¯”å¦‚æƒ³æ–°å¢ä¸€ä¸ª writerç”¨æˆ·ï¼Ÿ<br></div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: æ²¡æœ‰é”™ã€‚å¦‚æœä½ è¦é…ç½®åŒå‘SSLï¼Œä¹Ÿå°±æ˜¯å®¢æˆ·ç«¯çš„è®¤è¯ï¼Œé‚£ä¹ˆè¦åŠ ä¸Š</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-08-18 00:50:57</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/17/e0/35/93ef5909.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>Richard123m</span>
  </div>
  <div class="_2_QraFYR_0">Brokeré—´ç”¨SSLæˆ–saslï¼Œä¸ä¸ç”¨ç›¸æ¯”ï¼Œé€šä¿¡çš„é€Ÿç‡ä¼šæ˜¯å¤šå°‘ï¼Œç‰¹åˆ«æ˜¯å¤šå‰¯æœ¬æƒ…å†µ</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: é€šå¸¸æƒ…å†µä¸‹è®¤ä¸ºæ€§èƒ½ä¼šä¸‹é™30~40ï¿¥</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-05-24 18:56:43</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/11/47/1b/64262861.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>èƒ¡å°ç¦¾</span>
  </div>
  <div class="_2_QraFYR_0"><br>bin&#47;kafka-acls.sh --authorizer-properties zookeeper.connect=localhost:2181 --add --allow-principal User:Bob --producer --topic Test-topic<br>å‡å¦‚æˆ‘ä¸åšè®¤è¯ï¼Œåªä½¿ç”¨è¿™ä¸ªå‘½ä»¤æ¥è®¾ç½®æˆæƒï¼Œèµ·ä¸åˆ°æ•ˆæœçš„å—ï¼Ÿ</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: å› ä¸ºæ²¡æœ‰ç”¨æˆ·çš„æ¦‚å¿µï¼Œåªèƒ½é’ˆå¯¹ipçº§åˆ«è¿›è¡Œè®¾ç½®</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-03-05 15:37:05</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/14/66/77/194ba21d.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>lzh</span>
  </div>
  <div class="_2_QraFYR_0">è€å¸ˆï¼Œè¯·é—®keystoreå’Œtruststoreæœ‰æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«å•Šï¼Œæ—¢ç”Ÿç‘œä½•ç”Ÿäº®ï¼Ÿ</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: ç®€å•æ¥è¯´keystoreç”¨äºä¿å­˜ä½ è‡ªå·±çš„èº«ä»½éªŒè¯ä¿¡æ¯ï¼Œè€Œtruststoreç”¨äºä¿å­˜å…¶ä»–äººçš„èº«ä»½éªŒè¯ä¿¡æ¯</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2020-11-28 10:29:22</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src=""
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>Geek_02ab73</span>
  </div>
  <div class="_2_QraFYR_0">è€å¸ˆï¼Œä¸€ç›´æœ‰ä¸ªç–‘é—®ï¼Ÿ openssl ç”Ÿæˆçš„è¯ä¹¦å’ŒLet&#39;s Encrypt é¢å‘ç»™æˆ‘ä»¬çš„æœ‰ä»€ä¹ˆåŒºåˆ«<br>1. Let&#39;s Encrypt æ˜¯æ¯ä¸‰ä¸ªæœˆåˆ°æœŸï¼Œç”¨æ¥æœåŠ¡å™¨å…¬å¼€HTTPSæœåŠ¡ï¼Œ<br>2. keystore + openssl å¼„å‡ºæ¥çš„SSLæ˜¯ç”¨æ¥åšå†…éƒ¨æœåŠ¡æ²Ÿé€šçš„<br><br>ä¸çŸ¥é“æˆ‘ç†è§£çš„å¯¹ä¸ï¼Ÿ</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: Let&#39;s Encryptæ˜¯ä¸€ä¸ªå…è´¹çš„CAå§ï¼Œå®ƒä½¿ç”¨opensslç”Ÿæˆè¯ä¹¦å¹¶åˆ©ç”¨å®ƒè‡ªå·±çš„æœåŠ¡è¿›è¡Œç­¾å‘ã€‚</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2020-11-24 18:59:44</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/11/ed/4c/8674b6ad.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>timmy21</span>
  </div>
  <div class="_2_QraFYR_0">è€å¸ˆæˆ‘ä»¬ä½¿ç”¨SASL+ACLåšè®¤è¯å’Œæƒé™ï¼Œå¯æ˜¯é‡åˆ°â€œthe client is not authorized to access this groupâ€æŠ¥é”™ã€‚å¥‡æ€ªçš„æ˜¯pythonå®¢æˆ·ç«¯ï¼ˆ1.4.7ä»¥ä¸Šï¼‰å¯ä»¥æ­£å¸¸æ¶ˆè´¹ï¼Œå¯æ˜¯Golangçš„saramaå´æŠ¥ä¸Šé¢é‚£ä¸ªé”™ï¼Œå¦å¤–ä½ç‰ˆæœ¬çš„pythonå®¢æˆ·ç«¯ä¹ŸæŠ¥é‚£ä¸ªé”™ã€‚è¯·é—®è€å¸ˆè¿™å¯èƒ½æ˜¯ä»€ä¹ˆåŸå› ï¼Ÿ</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: æ˜¯â€œthe client is not authorized to access this groupâ€è¿˜æ˜¯â€œNot authorized to access groupâ€ï¼Ÿå‰è€…åº”è¯¥æ˜¯å®¢æˆ·ç«¯è‡ªå·±æŠ›å‡ºæ¥çš„ï¼Œåé¢æ‰æ˜¯KafkaæŠ›å‡ºæ¥çš„ã€‚å¦‚æœæ˜¯å‰è€…çš„å¼‚å¸¸ï¼Œé‚£ä¹ˆå¤šåŠæ˜¯å› ä¸ºä½ç‰ˆæœ¬çš„å®¢æˆ·ç«¯ä¸å…¼å®¹å½“å‰Kafkaç‰ˆæœ¬</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2020-10-01 08:34:37</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/12/0c/c2/bad34a50.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>å¼ æ´‹</span>
  </div>
  <div class="_2_QraFYR_0">è€å¸ˆ æŒ‰ç…§è¿™ä¸¤èŠ‚çš„é…ç½® å¯åŠ¨kafka ä¸€ç›´æç¤ºè¿™ä¸ªError <br>Connection to node 0 failed authentication due to :SSL handshake falied <br>WaRN SSL handshake failed <br>SSLHandshakeException: General SSLEngine problem</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: å¯èƒ½çš„åŸå› æ˜¯ssl.endpoint.identification.algorithmè®¾ç½®æˆäº†httpsï¼Œå¼€å¯äº†ä¸»æœºåéªŒè¯ã€‚è®¾ç½®ä¸ºç©ºè¯•è¯•ã€‚</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2020-07-08 15:13:09</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLl9nj9b6RydKADq82ZwOad0fQcvXWyQKk5U5RFC2kzHGI4GjIQsIZvHsEm7mFELgMiaGx3lGq9vag/132"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>å’¸æ·¡ä¸€é¦–è¯—</span>
  </div>
  <div class="_2_QraFYR_0">èƒ¡è€å¸ˆï¼Œâ€œKafka æˆæƒæœºåˆ¶èƒ½ä¸é…ç½®è®¤è¯æœºåˆ¶è€Œå•ç‹¬ä½¿ç”¨å—ï¼Ÿå…¶å®ï¼Œè¿™æ˜¯å¯ä»¥çš„ï¼Œåªæ˜¯ä½ åªèƒ½ä¸º IP åœ°å€è®¾ç½®æƒé™ã€‚â€è¿™å¥è¯ä¸æ˜¯å¾ˆç†è§£ï¼Œä¸ºä»€ä¹ˆåªèƒ½ä¸ºIP è®¾ç½®æƒé™ï¼Ÿé™¤äº†ipæƒé™ä¸èƒ½è®¾ç½®å…¶ä»–æƒé™å—ï¼Ÿæ¯”å¦‚æˆ‘å¼€å¯äº†æˆæƒï¼Œæ²¡å¼€å¯è®¤è¯ï¼Œæˆ‘ä¸èƒ½ç”¨kafka-acl è„šæœ¬è®¾ç½®--allow-principal User:&#39;*&#39; --allow-host &#39;*&#39;  --operation All --topic &#39;*&#39; --cluster å—ï¼Ÿ</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: å¦‚æœåªæœ‰æˆæƒæ²¡æœ‰è®¤è¯ï¼Œé‚£ä¹ˆä½ ç»™è°æˆæƒå‘¢ï¼Ÿï¼Ÿ</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2020-03-14 10:36:59</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>é’±</span>
  </div>
  <div class="_2_QraFYR_0">æ‰“å¡ï¼Œè®°ä½ï¼šä½ æˆäºˆçš„æƒé™è¶Šå°‘ï¼Œä½ çš„ Kafka é›†ç¾¤å°±è¶Šå®‰å…¨ã€‚</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2019-09-23 08:32:36</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/0f/4d/fd/0aa0e39f.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>è®¸ç«¥ç«¥</span>
  </div>
  <div class="_2_QraFYR_0">è€å¸ˆçš„å°ç»“å¾ˆä¸é”™ï¼Œè·Ÿç€è€å¸ˆä¸€èµ·ç²¾è¿›ã€‚</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2019-08-20 14:58:15</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJUJKviaecwxpAZCAnHWap86kXUichv5JwUoAtrUNy4ugC0kMMmssFDdyayKFgAoA9Z62sqMZaibbvUg/132"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>Geek_edc612</span>
  </div>
  <div class="_2_QraFYR_0">æˆ‘çœ‹ä¹‹å‰sasl-plainå°±æ˜¯user  Wrterè¿™æ ·æˆæƒç”¨æˆ·ï¼Œsslçš„å’‹è¿™ä¹ˆå¤æ‚ã€‚ã€‚ã€‚</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2019-08-20 10:15:13</div>
  </div>
</div>
</div>
</li>
</ul>